<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shap - Main 02 &mdash; python-spare-code 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/eniapp.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> python-spare-code
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Example Galleries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">General</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">python-spare-code</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Shap - Main 02</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/_examples/shap-examples/plot_main02.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-shap-examples-plot-main02-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="shap-main-02">
<span id="sphx-glr-examples-shap-examples-plot-main02-py"></span><h1>Shap - Main 02<a class="headerlink" href="#shap-main-02" title="Permalink to this headline">ÔÉÅ</a></h1>
<ul class="sphx-glr-horizontal">
<li><img src="../../_images/sphx_glr_plot_main02_001.png" srcset="../../_images/sphx_glr_plot_main02_001.png" alt="GaussianNB" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_002.png" srcset="../../_images/sphx_glr_plot_main02_002.png" alt="LogisticRegression" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_003.png" srcset="../../_images/sphx_glr_plot_main02_003.png" alt="DecisionTreeClassifier" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_004.png" srcset="../../_images/sphx_glr_plot_main02_004.png" alt="RandomForestClassifier" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_005.png" srcset="../../_images/sphx_glr_plot_main02_005.png" alt="XGBClassifier" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_006.png" srcset="../../_images/sphx_glr_plot_main02_006.png" alt="MLPClassifier" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_007.png" srcset="../../_images/sphx_glr_plot_main02_007.png" alt="SVC" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_plot_main02_008.png" srcset="../../_images/sphx_glr_plot_main02_008.png" alt="ExtraTreesClassifier" class = "sphx-glr-multi-img"/></li>
</ul>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
The use of label encoder in XGBClassifier is deprecated and will be removed in a future release. To remove this warning, do the following: 1) Pass option use_label_encoder=False when constructing XGBClassifier object; and 2) Encode your labels (y) as integers starting with 0, i.e. 0, 1, 2, ..., [num_class - 1].
[15:15:24] WARNING: C:/Users/Administrator/workspace/xgboost-win64_release_1.5.1/src/learner.cc:1115: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective &#39;binary:logistic&#39; was changed from &#39;error&#39; to &#39;logloss&#39;. Explicitly set eval_metric if you&#39;d like to restore the old behavior.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
Stochastic Optimizer: Maximum iterations (200) reached and the optimization hasn&#39;t converged yet.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
Feature names only support names that are all strings. Got feature names with dtypes: [&#39;str_&#39;]. An error will be raised in 1.2.
&lt;IPython.core.display.HTML object&gt;

--------------------------------------------------------------------------------
Classifier: GaussianNB()
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####1                                                                                                                                                           | 12/375 [00:00&lt;00:03, 118.81it/s]
  6%|##########3                                                                                                                                                      | 24/375 [00:00&lt;00:02, 118.12it/s]
 10%|###############4                                                                                                                                                 | 36/375 [00:00&lt;00:02, 118.44it/s]
 13%|####################6                                                                                                                                            | 48/375 [00:00&lt;00:02, 117.21it/s]
 16%|#########################7                                                                                                                                       | 60/375 [00:00&lt;00:02, 117.16it/s]
 19%|##############################9                                                                                                                                  | 72/375 [00:00&lt;00:02, 116.55it/s]
 22%|####################################                                                                                                                             | 84/375 [00:00&lt;00:02, 117.28it/s]
 26%|#########################################2                                                                                                                       | 96/375 [00:00&lt;00:02, 117.76it/s]
 29%|##############################################                                                                                                                  | 108/375 [00:00&lt;00:02, 118.09it/s]
 32%|###################################################2                                                                                                            | 120/375 [00:01&lt;00:02, 118.13it/s]
 35%|########################################################3                                                                                                       | 132/375 [00:01&lt;00:02, 118.34it/s]
 38%|#############################################################4                                                                                                  | 144/375 [00:01&lt;00:01, 118.13it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 116.59it/s]
 45%|#######################################################################6                                                                                        | 168/375 [00:01&lt;00:01, 107.13it/s]
 48%|############################################################################8                                                                                   | 180/375 [00:01&lt;00:01, 109.80it/s]
 51%|#################################################################################9                                                                              | 192/375 [00:01&lt;00:01, 111.11it/s]
 54%|#######################################################################################                                                                         | 204/375 [00:01&lt;00:01, 113.32it/s]
 58%|############################################################################################1                                                                   | 216/375 [00:01&lt;00:01, 114.92it/s]
 61%|#################################################################################################2                                                              | 228/375 [00:01&lt;00:01, 115.71it/s]
 64%|######################################################################################################4                                                         | 240/375 [00:02&lt;00:01, 116.63it/s]
 67%|###########################################################################################################9                                                    | 253/375 [00:02&lt;00:01, 117.45it/s]
 71%|#################################################################################################################                                               | 265/375 [00:02&lt;00:00, 117.64it/s]
 74%|######################################################################################################################1                                         | 277/375 [00:02&lt;00:00, 118.33it/s]
 77%|###########################################################################################################################3                                    | 289/375 [00:02&lt;00:00, 117.51it/s]
 80%|################################################################################################################################4                               | 301/375 [00:02&lt;00:00, 117.90it/s]
 83%|#####################################################################################################################################5                          | 313/375 [00:02&lt;00:00, 117.48it/s]
 87%|##########################################################################################################################################6                     | 325/375 [00:02&lt;00:00, 116.84it/s]
 90%|###############################################################################################################################################7                | 337/375 [00:02&lt;00:00, 117.43it/s]
 93%|####################################################################################################################################################9           | 349/375 [00:02&lt;00:00, 117.60it/s]
 96%|##########################################################################################################################################################      | 361/375 [00:03&lt;00:00, 117.96it/s]
100%|###############################################################################################################################################################5| 374/375 [00:03&lt;00:00, 118.37it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 116.56it/s]
[[-0.2143723  -0.19038141 -0.22085071]
 [ 0.15549902  0.04950881  0.16806476]
 [-0.31382936  0.06041049 -0.31223003]
 ...
 [-0.10057844  0.0701043  -0.13986502]
 [ 0.14968807  0.0257892   0.15703457]
 [-0.19725508  0.15063206 -0.2459545 ]]
base value: 0.6256054145239283

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####1                                                                                                                                                           | 12/375 [00:00&lt;00:03, 118.81it/s]
  7%|##########7                                                                                                                                                      | 25/375 [00:00&lt;00:02, 119.09it/s]
 10%|###############8                                                                                                                                                 | 37/375 [00:00&lt;00:02, 118.60it/s]
 13%|#####################                                                                                                                                            | 49/375 [00:00&lt;00:02, 117.78it/s]
 16%|##########################1                                                                                                                                      | 61/375 [00:00&lt;00:02, 118.14it/s]
 19%|###############################3                                                                                                                                 | 73/375 [00:00&lt;00:02, 117.20it/s]
 23%|####################################4                                                                                                                            | 85/375 [00:00&lt;00:02, 117.34it/s]
 26%|#########################################6                                                                                                                       | 97/375 [00:00&lt;00:02, 117.71it/s]
 29%|##############################################5                                                                                                                 | 109/375 [00:00&lt;00:02, 118.05it/s]
 32%|###################################################6                                                                                                            | 121/375 [00:01&lt;00:02, 118.29it/s]
 35%|########################################################7                                                                                                       | 133/375 [00:01&lt;00:02, 118.45it/s]
 39%|#############################################################8                                                                                                  | 145/375 [00:01&lt;00:01, 118.56it/s]
 42%|##################################################################9                                                                                             | 157/375 [00:01&lt;00:01, 118.89it/s]
 45%|########################################################################1                                                                                       | 169/375 [00:01&lt;00:01, 117.81it/s]
 49%|#############################################################################6                                                                                  | 182/375 [00:01&lt;00:01, 118.27it/s]
 52%|##################################################################################7                                                                             | 194/375 [00:01&lt;00:01, 118.09it/s]
 55%|#######################################################################################8                                                                        | 206/375 [00:01&lt;00:01, 117.27it/s]
 58%|#############################################################################################                                                                   | 218/375 [00:01&lt;00:01, 117.56it/s]
 61%|##################################################################################################1                                                             | 230/375 [00:01&lt;00:01, 117.93it/s]
 65%|#######################################################################################################2                                                        | 242/375 [00:02&lt;00:01, 118.54it/s]
 68%|############################################################################################################3                                                   | 254/375 [00:02&lt;00:01, 118.62it/s]
 71%|#################################################################################################################4                                              | 266/375 [00:02&lt;00:00, 118.68it/s]
 74%|######################################################################################################################6                                         | 278/375 [00:02&lt;00:00, 118.81it/s]
 77%|###########################################################################################################################7                                    | 290/375 [00:02&lt;00:00, 118.46it/s]
 81%|################################################################################################################################8                               | 302/375 [00:02&lt;00:00, 117.87it/s]
 84%|#####################################################################################################################################9                          | 314/375 [00:02&lt;00:00, 118.15it/s]
 87%|###########################################################################################################################################                     | 326/375 [00:02&lt;00:00, 118.35it/s]
 90%|################################################################################################################################################2               | 338/375 [00:02&lt;00:00, 117.23it/s]
 93%|#####################################################################################################################################################3          | 350/375 [00:02&lt;00:00, 117.70it/s]
 97%|##########################################################################################################################################################4     | 362/375 [00:03&lt;00:00, 118.03it/s]
100%|###############################################################################################################################################################5| 374/375 [00:03&lt;00:00, 118.27it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 118.11it/s]

--------------------------------------------------------------------------------
Classifier: LogisticRegression()
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####5                                                                                                                                                           | 13/375 [00:00&lt;00:02, 121.65it/s]
  7%|###########1                                                                                                                                                     | 26/375 [00:00&lt;00:02, 122.23it/s]
 10%|################7                                                                                                                                                | 39/375 [00:00&lt;00:02, 120.35it/s]
 14%|######################3                                                                                                                                          | 52/375 [00:00&lt;00:02, 120.80it/s]
 17%|###########################9                                                                                                                                     | 65/375 [00:00&lt;00:02, 121.46it/s]
 21%|#################################4                                                                                                                               | 78/375 [00:00&lt;00:02, 120.50it/s]
 24%|#######################################                                                                                                                          | 91/375 [00:00&lt;00:02, 120.46it/s]
 28%|############################################3                                                                                                                   | 104/375 [00:00&lt;00:02, 121.14it/s]
 31%|#################################################9                                                                                                              | 117/375 [00:00&lt;00:02, 121.25it/s]
 35%|#######################################################4                                                                                                        | 130/375 [00:01&lt;00:02, 121.33it/s]
 38%|#############################################################                                                                                                   | 143/375 [00:01&lt;00:01, 121.51it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 121.85it/s]
 45%|########################################################################1                                                                                       | 169/375 [00:01&lt;00:01, 121.06it/s]
 49%|#############################################################################6                                                                                  | 182/375 [00:01&lt;00:01, 121.53it/s]
 52%|###################################################################################2                                                                            | 195/375 [00:01&lt;00:01, 121.72it/s]
 55%|########################################################################################7                                                                       | 208/375 [00:01&lt;00:01, 120.97it/s]
 59%|##############################################################################################2                                                                 | 221/375 [00:01&lt;00:01, 120.45it/s]
 62%|###################################################################################################8                                                            | 234/375 [00:01&lt;00:01, 120.76it/s]
 66%|#########################################################################################################3                                                      | 247/375 [00:02&lt;00:01, 121.32it/s]
 69%|##############################################################################################################9                                                 | 260/375 [00:02&lt;00:00, 121.15it/s]
 73%|####################################################################################################################4                                           | 273/375 [00:02&lt;00:00, 121.60it/s]
 76%|##########################################################################################################################                                      | 286/375 [00:02&lt;00:00, 121.57it/s]
 80%|###############################################################################################################################5                                | 299/375 [00:02&lt;00:00, 120.53it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 120.89it/s]
 87%|##########################################################################################################################################6                     | 325/375 [00:02&lt;00:00, 121.15it/s]
 90%|################################################################################################################################################2               | 338/375 [00:02&lt;00:00, 120.58it/s]
 94%|#####################################################################################################################################################7          | 351/375 [00:02&lt;00:00, 120.18it/s]
 97%|###########################################################################################################################################################3    | 364/375 [00:03&lt;00:00, 120.91it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 121.10it/s]
[[ 0.11805943 -0.19497642 -0.52694509]
 [-0.25974175  0.04205357  0.61331924]
 [ 0.11618402  0.09841558 -0.37862677]
 ...
 [-0.01411525  0.04658801 -0.35991104]
 [ 0.06238287  0.02752441  0.09341777]
 [ 0.03816372  0.14229031 -0.38919416]]
base value: 0.6042417816207093

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####5                                                                                                                                                           | 13/375 [00:00&lt;00:02, 120.78it/s]
  7%|###########1                                                                                                                                                     | 26/375 [00:00&lt;00:02, 121.87it/s]
 10%|################7                                                                                                                                                | 39/375 [00:00&lt;00:02, 121.18it/s]
 14%|######################3                                                                                                                                          | 52/375 [00:00&lt;00:02, 120.42it/s]
 17%|###########################9                                                                                                                                     | 65/375 [00:00&lt;00:02, 120.29it/s]
 21%|#################################4                                                                                                                               | 78/375 [00:00&lt;00:02, 120.23it/s]
 24%|#######################################                                                                                                                          | 91/375 [00:00&lt;00:02, 120.27it/s]
 28%|############################################3                                                                                                                   | 104/375 [00:00&lt;00:02, 119.60it/s]
 31%|#################################################9                                                                                                              | 117/375 [00:00&lt;00:02, 119.84it/s]
 35%|#######################################################4                                                                                                        | 130/375 [00:01&lt;00:02, 120.38it/s]
 38%|#############################################################                                                                                                   | 143/375 [00:01&lt;00:01, 120.03it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 120.48it/s]
 45%|########################################################################1                                                                                       | 169/375 [00:01&lt;00:01, 120.44it/s]
 49%|#############################################################################6                                                                                  | 182/375 [00:01&lt;00:01, 120.09it/s]
 52%|###################################################################################2                                                                            | 195/375 [00:01&lt;00:01, 120.08it/s]
 55%|########################################################################################7                                                                       | 208/375 [00:01&lt;00:01, 120.50it/s]
 59%|##############################################################################################2                                                                 | 221/375 [00:01&lt;00:01, 121.14it/s]
 62%|###################################################################################################8                                                            | 234/375 [00:01&lt;00:01, 119.67it/s]
 66%|#########################################################################################################3                                                      | 247/375 [00:02&lt;00:01, 120.21it/s]
 69%|##############################################################################################################9                                                 | 260/375 [00:02&lt;00:00, 120.71it/s]
 73%|####################################################################################################################4                                           | 273/375 [00:02&lt;00:00, 120.61it/s]
 76%|##########################################################################################################################                                      | 286/375 [00:02&lt;00:00, 120.87it/s]
 80%|###############################################################################################################################5                                | 299/375 [00:02&lt;00:00, 120.72it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 120.39it/s]
 87%|##########################################################################################################################################6                     | 325/375 [00:02&lt;00:00, 120.72it/s]
 90%|################################################################################################################################################2               | 338/375 [00:02&lt;00:00, 120.75it/s]
 94%|#####################################################################################################################################################7          | 351/375 [00:02&lt;00:00, 120.97it/s]
 97%|###########################################################################################################################################################3    | 364/375 [00:03&lt;00:00, 119.79it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 120.41it/s]

--------------------------------------------------------------------------------
Classifier: DecisionTreeClassifier(random_state=0)
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####5                                                                                                                                                           | 13/375 [00:00&lt;00:02, 121.50it/s]
  7%|###########1                                                                                                                                                     | 26/375 [00:00&lt;00:02, 121.50it/s]
 10%|################7                                                                                                                                                | 39/375 [00:00&lt;00:02, 121.50it/s]
 14%|######################3                                                                                                                                          | 52/375 [00:00&lt;00:02, 120.05it/s]
 17%|###########################9                                                                                                                                     | 65/375 [00:00&lt;00:02, 120.97it/s]
 21%|#################################4                                                                                                                               | 78/375 [00:00&lt;00:02, 121.15it/s]
 24%|#######################################                                                                                                                          | 91/375 [00:00&lt;00:02, 120.89it/s]
 28%|############################################3                                                                                                                   | 104/375 [00:00&lt;00:02, 120.73it/s]
 31%|#################################################9                                                                                                              | 117/375 [00:00&lt;00:02, 119.51it/s]
 35%|#######################################################4                                                                                                        | 130/375 [00:01&lt;00:02, 120.11it/s]
 38%|#############################################################                                                                                                   | 143/375 [00:01&lt;00:01, 120.88it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 120.85it/s]
 45%|########################################################################1                                                                                       | 169/375 [00:01&lt;00:01, 120.03it/s]
 49%|#############################################################################6                                                                                  | 182/375 [00:01&lt;00:01, 119.23it/s]
 52%|###################################################################################2                                                                            | 195/375 [00:01&lt;00:01, 120.24it/s]
 55%|########################################################################################7                                                                       | 208/375 [00:01&lt;00:01, 120.61it/s]
 59%|##############################################################################################2                                                                 | 221/375 [00:01&lt;00:01, 120.88it/s]
 62%|###################################################################################################8                                                            | 234/375 [00:01&lt;00:01, 120.93it/s]
 66%|#########################################################################################################3                                                      | 247/375 [00:02&lt;00:01, 118.28it/s]
 69%|##############################################################################################################9                                                 | 260/375 [00:02&lt;00:00, 118.90it/s]
 73%|####################################################################################################################4                                           | 273/375 [00:02&lt;00:00, 119.67it/s]
 76%|##########################################################################################################################                                      | 286/375 [00:02&lt;00:00, 120.21it/s]
 80%|###############################################################################################################################5                                | 299/375 [00:02&lt;00:00, 120.14it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 119.88it/s]
 87%|##########################################################################################################################################6                     | 325/375 [00:02&lt;00:00, 120.36it/s]
 90%|################################################################################################################################################2               | 338/375 [00:02&lt;00:00, 121.03it/s]
 94%|#####################################################################################################################################################7          | 351/375 [00:02&lt;00:00, 121.17it/s]
 97%|###########################################################################################################################################################3    | 364/375 [00:03&lt;00:00, 121.03it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 120.36it/s]
[[ 0.02166667 -0.02333333 -0.58833333]
 [-0.01333333  0.08666667  0.33666667]
 [ 0.02166667  0.43166667 -0.04333333]
 ...
 [ 0.02166667 -0.11833333 -0.49333333]
 [-0.36333333 -0.07833333 -0.14833333]
 [ 0.02166667  0.06666667 -0.67833333]]
base value: 0.5900000000000001

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####5                                                                                                                                                           | 13/375 [00:00&lt;00:02, 121.50it/s]
  7%|###########1                                                                                                                                                     | 26/375 [00:00&lt;00:02, 121.50it/s]
 10%|################7                                                                                                                                                | 39/375 [00:00&lt;00:02, 121.50it/s]
 14%|######################3                                                                                                                                          | 52/375 [00:00&lt;00:02, 120.23it/s]
 17%|###########################9                                                                                                                                     | 65/375 [00:00&lt;00:02, 119.88it/s]
 21%|#################################4                                                                                                                               | 78/375 [00:00&lt;00:02, 120.80it/s]
 24%|#######################################                                                                                                                          | 91/375 [00:00&lt;00:02, 121.03it/s]
 28%|############################################3                                                                                                                   | 104/375 [00:00&lt;00:02, 120.98it/s]
 31%|#################################################9                                                                                                              | 117/375 [00:00&lt;00:02, 121.09it/s]
 35%|#######################################################4                                                                                                        | 130/375 [00:01&lt;00:02, 120.18it/s]
 38%|#############################################################                                                                                                   | 143/375 [00:01&lt;00:01, 120.24it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 120.62it/s]
 45%|########################################################################1                                                                                       | 169/375 [00:01&lt;00:01, 120.66it/s]
 49%|#############################################################################6                                                                                  | 182/375 [00:01&lt;00:01, 120.24it/s]
 52%|###################################################################################2                                                                            | 195/375 [00:01&lt;00:01, 120.28it/s]
 55%|########################################################################################7                                                                       | 208/375 [00:01&lt;00:01, 120.64it/s]
 59%|##############################################################################################2                                                                 | 221/375 [00:01&lt;00:01, 120.90it/s]
 62%|###################################################################################################8                                                            | 234/375 [00:01&lt;00:01, 120.95it/s]
 66%|#########################################################################################################3                                                      | 247/375 [00:02&lt;00:01, 121.12it/s]
 69%|##############################################################################################################9                                                 | 260/375 [00:02&lt;00:00, 120.22it/s]
 73%|####################################################################################################################4                                           | 273/375 [00:02&lt;00:00, 120.26it/s]
 76%|##########################################################################################################################                                      | 286/375 [00:02&lt;00:00, 120.63it/s]
 80%|###############################################################################################################################5                                | 299/375 [00:02&lt;00:00, 120.66it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 119.91it/s]
 87%|##########################################################################################################################################6                     | 325/375 [00:02&lt;00:00, 120.38it/s]
 90%|################################################################################################################################################2               | 338/375 [00:02&lt;00:00, 120.71it/s]
 94%|#####################################################################################################################################################7          | 351/375 [00:02&lt;00:00, 120.68it/s]
 97%|###########################################################################################################################################################3    | 364/375 [00:03&lt;00:00, 120.92it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 120.66it/s]

--------------------------------------------------------------------------------
Classifier: RandomForestClassifier(random_state=0)
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  1%|#7                                                                                                                                                                 | 4/375 [00:00&lt;00:09, 39.22it/s]
  2%|###9                                                                                                                                                               | 9/375 [00:00&lt;00:09, 39.85it/s]
  4%|######                                                                                                                                                            | 14/375 [00:00&lt;00:08, 40.33it/s]
  5%|########2                                                                                                                                                         | 19/375 [00:00&lt;00:08, 39.94it/s]
  6%|##########3                                                                                                                                                       | 24/375 [00:00&lt;00:08, 40.20it/s]
  8%|############5                                                                                                                                                     | 29/375 [00:00&lt;00:08, 40.35it/s]
  9%|##############6                                                                                                                                                   | 34/375 [00:00&lt;00:08, 40.48it/s]
 10%|################8                                                                                                                                                 | 39/375 [00:00&lt;00:08, 40.33it/s]
 12%|###################                                                                                                                                               | 44/375 [00:01&lt;00:08, 40.33it/s]
 13%|#####################1                                                                                                                                            | 49/375 [00:01&lt;00:08, 39.93it/s]
 14%|#######################3                                                                                                                                          | 54/375 [00:01&lt;00:08, 39.98it/s]
 16%|#########################4                                                                                                                                        | 59/375 [00:01&lt;00:07, 40.18it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:01&lt;00:07, 39.74it/s]
 18%|#############################8                                                                                                                                    | 69/375 [00:01&lt;00:07, 40.01it/s]
 20%|###############################9                                                                                                                                  | 74/375 [00:01&lt;00:07, 40.12it/s]
 21%|##################################1                                                                                                                               | 79/375 [00:01&lt;00:07, 40.28it/s]
 22%|####################################2                                                                                                                             | 84/375 [00:02&lt;00:07, 40.39it/s]
 24%|######################################4                                                                                                                           | 89/375 [00:02&lt;00:07, 40.37it/s]
 25%|########################################6                                                                                                                         | 94/375 [00:02&lt;00:06, 40.39it/s]
 26%|##########################################7                                                                                                                       | 99/375 [00:02&lt;00:06, 40.47it/s]
 28%|############################################6                                                                                                                    | 104/375 [00:02&lt;00:06, 39.85it/s]
 29%|##############################################7                                                                                                                  | 109/375 [00:02&lt;00:06, 40.08it/s]
 30%|################################################9                                                                                                                | 114/375 [00:02&lt;00:06, 40.18it/s]
 32%|###################################################                                                                                                              | 119/375 [00:02&lt;00:06, 40.32it/s]
 33%|#####################################################2                                                                                                           | 124/375 [00:03&lt;00:06, 40.42it/s]
 34%|#######################################################3                                                                                                         | 129/375 [00:03&lt;00:06, 40.49it/s]
 36%|#########################################################5                                                                                                       | 134/375 [00:03&lt;00:06, 40.13it/s]
 37%|###########################################################6                                                                                                     | 139/375 [00:03&lt;00:05, 40.28it/s]
 38%|#############################################################8                                                                                                   | 144/375 [00:03&lt;00:05, 40.39it/s]
 40%|###############################################################9                                                                                                 | 149/375 [00:03&lt;00:05, 39.42it/s]
 41%|#################################################################6                                                                                               | 153/375 [00:03&lt;00:05, 39.30it/s]
 42%|###################################################################4                                                                                             | 157/375 [00:03&lt;00:05, 39.38it/s]
 43%|#####################################################################1                                                                                           | 161/375 [00:04&lt;00:05, 39.33it/s]
 44%|#######################################################################2                                                                                         | 166/375 [00:04&lt;00:05, 39.66it/s]
 45%|########################################################################9                                                                                        | 170/375 [00:04&lt;00:05, 39.75it/s]
 46%|##########################################################################7                                                                                      | 174/375 [00:04&lt;00:05, 39.53it/s]
 47%|############################################################################4                                                                                    | 178/375 [00:04&lt;00:05, 39.00it/s]
 49%|##############################################################################1                                                                                  | 182/375 [00:04&lt;00:04, 39.28it/s]
 50%|################################################################################2                                                                                | 187/375 [00:04&lt;00:04, 39.42it/s]
 51%|##################################################################################                                                                               | 191/375 [00:04&lt;00:04, 39.58it/s]
 52%|####################################################################################1                                                                            | 196/375 [00:04&lt;00:04, 40.05it/s]
 54%|######################################################################################2                                                                          | 201/375 [00:05&lt;00:04, 40.35it/s]
 55%|########################################################################################4                                                                        | 206/375 [00:05&lt;00:04, 40.44it/s]
 56%|##########################################################################################5                                                                      | 211/375 [00:05&lt;00:04, 40.41it/s]
 58%|############################################################################################7                                                                    | 216/375 [00:05&lt;00:03, 40.52it/s]
 59%|##############################################################################################8                                                                  | 221/375 [00:05&lt;00:03, 40.06it/s]
 60%|#################################################################################################                                                                | 226/375 [00:05&lt;00:03, 39.95it/s]
 61%|##################################################################################################7                                                              | 230/375 [00:05&lt;00:03, 39.65it/s]
 62%|####################################################################################################4                                                            | 234/375 [00:05&lt;00:03, 39.73it/s]
 64%|######################################################################################################6                                                          | 239/375 [00:05&lt;00:03, 39.92it/s]
 65%|########################################################################################################7                                                        | 244/375 [00:06&lt;00:03, 40.25it/s]
 66%|##########################################################################################################9                                                      | 249/375 [00:06&lt;00:03, 40.38it/s]
 68%|#############################################################################################################                                                    | 254/375 [00:06&lt;00:02, 40.46it/s]
 69%|###############################################################################################################1                                                 | 259/375 [00:06&lt;00:02, 40.59it/s]
 70%|#################################################################################################################3                                               | 264/375 [00:06&lt;00:02, 40.31it/s]
 72%|###################################################################################################################4                                             | 269/375 [00:06&lt;00:02, 40.31it/s]
 73%|#####################################################################################################################6                                           | 274/375 [00:06&lt;00:02, 39.73it/s]
 74%|#######################################################################################################################7                                         | 279/375 [00:06&lt;00:02, 39.93it/s]
 76%|#########################################################################################################################9                                       | 284/375 [00:07&lt;00:02, 40.15it/s]
 77%|############################################################################################################################                                     | 289/375 [00:07&lt;00:02, 40.30it/s]
 78%|##############################################################################################################################2                                  | 294/375 [00:07&lt;00:01, 40.50it/s]
 80%|################################################################################################################################3                                | 299/375 [00:07&lt;00:01, 40.51it/s]
 81%|##################################################################################################################################5                              | 304/375 [00:07&lt;00:01, 40.55it/s]
 82%|####################################################################################################################################6                            | 309/375 [00:07&lt;00:01, 40.09it/s]
 84%|######################################################################################################################################8                          | 314/375 [00:07&lt;00:01, 40.16it/s]
 85%|########################################################################################################################################9                        | 319/375 [00:07&lt;00:01, 39.92it/s]
 86%|###########################################################################################################################################1                     | 324/375 [00:08&lt;00:01, 40.33it/s]
 88%|#############################################################################################################################################2                   | 329/375 [00:08&lt;00:01, 40.42it/s]
 89%|###############################################################################################################################################3                 | 334/375 [00:08&lt;00:01, 40.30it/s]
 90%|#################################################################################################################################################5               | 339/375 [00:08&lt;00:00, 40.32it/s]
 92%|###################################################################################################################################################6             | 344/375 [00:08&lt;00:00, 40.42it/s]
 93%|#####################################################################################################################################################8           | 349/375 [00:08&lt;00:00, 40.49it/s]
 94%|#######################################################################################################################################################9         | 354/375 [00:08&lt;00:00, 40.24it/s]
 96%|##########################################################################################################################################################1      | 359/375 [00:08&lt;00:00, 39.85it/s]
 97%|############################################################################################################################################################2    | 364/375 [00:09&lt;00:00, 40.18it/s]
 98%|##############################################################################################################################################################4  | 369/375 [00:09&lt;00:00, 40.22it/s]
100%|################################################################################################################################################################5| 374/375 [00:09&lt;00:00, 40.45it/s]
100%|#################################################################################################################################################################| 375/375 [00:09&lt;00:00, 40.12it/s]
[[-0.1986     -0.0435     -0.346     ]
 [ 0.09825     0.07475     0.2289    ]
 [-0.0143      0.2767     -0.1405    ]
 ...
 [-0.01326667 -0.01676667 -0.29806667]
 [-0.05613333 -0.14933333 -0.04263333]
 [-0.21108333  0.10386667 -0.35088333]]
base value: 0.5881000000000001

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  1%|##1                                                                                                                                                                | 5/375 [00:00&lt;00:09, 40.73it/s]
  3%|####3                                                                                                                                                             | 10/375 [00:00&lt;00:09, 40.30it/s]
  4%|######4                                                                                                                                                           | 15/375 [00:00&lt;00:08, 40.46it/s]
  5%|########6                                                                                                                                                         | 20/375 [00:00&lt;00:08, 40.15it/s]
  7%|##########8                                                                                                                                                       | 25/375 [00:00&lt;00:08, 39.82it/s]
  8%|############5                                                                                                                                                     | 29/375 [00:00&lt;00:08, 39.46it/s]
  9%|##############6                                                                                                                                                   | 34/375 [00:00&lt;00:08, 39.86it/s]
 10%|################8                                                                                                                                                 | 39/375 [00:00&lt;00:08, 39.90it/s]
 12%|###################                                                                                                                                               | 44/375 [00:01&lt;00:08, 40.11it/s]
 13%|#####################1                                                                                                                                            | 49/375 [00:01&lt;00:08, 40.28it/s]
 14%|#######################3                                                                                                                                          | 54/375 [00:01&lt;00:07, 40.29it/s]
 16%|#########################4                                                                                                                                        | 59/375 [00:01&lt;00:07, 40.30it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:01&lt;00:07, 39.81it/s]
 18%|#############################3                                                                                                                                    | 68/375 [00:01&lt;00:07, 39.46it/s]
 19%|###############################5                                                                                                                                  | 73/375 [00:01&lt;00:07, 39.73it/s]
 21%|#################################6                                                                                                                                | 78/375 [00:01&lt;00:07, 40.01it/s]
 22%|###################################8                                                                                                                              | 83/375 [00:02&lt;00:07, 40.30it/s]
 23%|######################################                                                                                                                            | 88/375 [00:02&lt;00:07, 40.48it/s]
 25%|########################################1                                                                                                                         | 93/375 [00:02&lt;00:07, 40.14it/s]
 26%|##########################################3                                                                                                                       | 98/375 [00:02&lt;00:06, 40.19it/s]
 27%|############################################2                                                                                                                    | 103/375 [00:02&lt;00:06, 40.27it/s]
 29%|##############################################3                                                                                                                  | 108/375 [00:02&lt;00:06, 40.06it/s]
 30%|################################################5                                                                                                                | 113/375 [00:02&lt;00:06, 39.85it/s]
 31%|##################################################6                                                                                                              | 118/375 [00:02&lt;00:06, 40.09it/s]
 33%|####################################################8                                                                                                            | 123/375 [00:03&lt;00:06, 40.35it/s]
 34%|######################################################9                                                                                                          | 128/375 [00:03&lt;00:06, 40.42it/s]
 35%|#########################################################1                                                                                                       | 133/375 [00:03&lt;00:05, 40.39it/s]
 37%|###########################################################2                                                                                                     | 138/375 [00:03&lt;00:05, 40.47it/s]
 38%|#############################################################3                                                                                                   | 143/375 [00:03&lt;00:05, 40.52it/s]
 39%|###############################################################5                                                                                                 | 148/375 [00:03&lt;00:05, 40.57it/s]
 41%|#################################################################6                                                                                               | 153/375 [00:03&lt;00:05, 39.72it/s]
 42%|###################################################################8                                                                                             | 158/375 [00:03&lt;00:05, 39.84it/s]
 43%|#####################################################################9                                                                                           | 163/375 [00:04&lt;00:05, 40.18it/s]
 45%|########################################################################1                                                                                        | 168/375 [00:04&lt;00:05, 40.34it/s]
 46%|##########################################################################2                                                                                      | 173/375 [00:04&lt;00:04, 40.44it/s]
 47%|############################################################################4                                                                                    | 178/375 [00:04&lt;00:04, 40.40it/s]
 49%|##############################################################################5                                                                                  | 183/375 [00:04&lt;00:04, 40.48it/s]
 50%|################################################################################7                                                                                | 188/375 [00:04&lt;00:04, 40.45it/s]
 51%|##################################################################################8                                                                              | 193/375 [00:04&lt;00:04, 40.51it/s]
 53%|#####################################################################################                                                                            | 198/375 [00:04&lt;00:04, 39.97it/s]
 54%|#######################################################################################1                                                                         | 203/375 [00:05&lt;00:04, 40.17it/s]
 55%|#########################################################################################3                                                                       | 208/375 [00:05&lt;00:04, 40.37it/s]
 57%|###########################################################################################4                                                                     | 213/375 [00:05&lt;00:04, 40.36it/s]
 58%|#############################################################################################5                                                                   | 218/375 [00:05&lt;00:03, 40.35it/s]
 59%|###############################################################################################7                                                                 | 223/375 [00:05&lt;00:03, 40.44it/s]
 61%|#################################################################################################8                                                               | 228/375 [00:05&lt;00:03, 40.51it/s]
 62%|####################################################################################################                                                             | 233/375 [00:05&lt;00:03, 40.45it/s]
 63%|######################################################################################################1                                                          | 238/375 [00:05&lt;00:03, 40.02it/s]
 65%|########################################################################################################3                                                        | 243/375 [00:06&lt;00:03, 39.92it/s]
 66%|##########################################################################################################4                                                      | 248/375 [00:06&lt;00:03, 40.18it/s]
 67%|############################################################################################################6                                                    | 253/375 [00:06&lt;00:03, 40.40it/s]
 69%|##############################################################################################################7                                                  | 258/375 [00:06&lt;00:02, 40.67it/s]
 70%|################################################################################################################9                                                | 263/375 [00:06&lt;00:02, 40.57it/s]
 71%|###################################################################################################################                                              | 268/375 [00:06&lt;00:02, 40.59it/s]
 73%|#####################################################################################################################2                                           | 273/375 [00:06&lt;00:02, 40.50it/s]
 74%|#######################################################################################################################3                                         | 278/375 [00:06&lt;00:02, 40.54it/s]
 75%|#########################################################################################################################5                                       | 283/375 [00:07&lt;00:02, 39.70it/s]
 77%|###########################################################################################################################6                                     | 288/375 [00:07&lt;00:02, 39.98it/s]
 78%|#############################################################################################################################7                                   | 293/375 [00:07&lt;00:02, 40.01it/s]
 79%|###############################################################################################################################9                                 | 298/375 [00:07&lt;00:01, 40.20it/s]
 81%|##################################################################################################################################                               | 303/375 [00:07&lt;00:01, 39.47it/s]
 82%|####################################################################################################################################2                            | 308/375 [00:07&lt;00:01, 39.91it/s]
 83%|######################################################################################################################################3                          | 313/375 [00:07&lt;00:01, 40.17it/s]
 85%|########################################################################################################################################5                        | 318/375 [00:07&lt;00:01, 40.41it/s]
 86%|##########################################################################################################################################6                      | 323/375 [00:08&lt;00:01, 40.38it/s]
 87%|############################################################################################################################################8                    | 328/375 [00:08&lt;00:01, 39.90it/s]
 89%|##############################################################################################################################################9                  | 333/375 [00:08&lt;00:01, 39.96it/s]
 90%|#################################################################################################################################################1               | 338/375 [00:08&lt;00:00, 40.07it/s]
 91%|###################################################################################################################################################2             | 343/375 [00:08&lt;00:00, 40.24it/s]
 93%|#####################################################################################################################################################4           | 348/375 [00:08&lt;00:00, 40.56it/s]
 94%|#######################################################################################################################################################5         | 353/375 [00:08&lt;00:00, 40.61it/s]
 95%|#########################################################################################################################################################7       | 358/375 [00:08&lt;00:00, 40.42it/s]
 97%|###########################################################################################################################################################8     | 363/375 [00:09&lt;00:00, 40.49it/s]
 98%|#############################################################################################################################################################9   | 368/375 [00:09&lt;00:00, 40.15it/s]
 99%|################################################################################################################################################################1| 373/375 [00:09&lt;00:00, 39.80it/s]
100%|#################################################################################################################################################################| 375/375 [00:09&lt;00:00, 40.19it/s]

--------------------------------------------------------------------------------
Classifier: XGBClassifier(base_score=0.5, booster=&#39;gbtree&#39;, colsample_bylevel=1,
              colsample_bynode=1, colsample_bytree=1, enable_categorical=False,
              eta=0.05, gamma=0.2, gpu_id=-1, importance_type=None,
              interaction_constraints=&#39;&#39;, learning_rate=0.0500000007,
              max_delta_step=0, max_depth=4, min_child_weight=0.005,
              missing=nan, monotone_constraints=&#39;()&#39;, n_estimators=100,
              n_jobs=8, num_parallel_tree=1, predictor=&#39;auto&#39;, random_state=0,
              reg_alpha=0, reg_lambda=1, scale_pos_weight=1, subsample=1,
              tree_method=&#39;exact&#39;, validate_parameters=1, verbosity=None)
Kernel type: &lt;class &#39;shap.explainers._tree.Tree&#39;&gt;
[[-0.09027431 -0.58367383 -4.20171465]
 [-0.566376    0.93458731  3.56861343]
 [ 0.32619197  2.8111843  -2.96783778]
 ...
 [ 0.78497741 -0.03524856 -2.36360644]
 [ 0.24668202 -0.03663879  0.63015682]
 [ 0.2185051   1.57475921 -3.67290018]]
base value: 0.3504104323204956

--------------------------------------------------------------------------------
Classifier: MLPClassifier()
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####1                                                                                                                                                           | 12/375 [00:00&lt;00:03, 114.29it/s]
  6%|##########3                                                                                                                                                      | 24/375 [00:00&lt;00:03, 114.93it/s]
 10%|###############4                                                                                                                                                 | 36/375 [00:00&lt;00:02, 114.63it/s]
 13%|####################6                                                                                                                                            | 48/375 [00:00&lt;00:02, 114.65it/s]
 16%|#########################7                                                                                                                                       | 60/375 [00:00&lt;00:02, 115.01it/s]
 19%|##############################9                                                                                                                                  | 72/375 [00:00&lt;00:02, 114.76it/s]
 22%|####################################                                                                                                                             | 84/375 [00:00&lt;00:02, 114.96it/s]
 26%|#########################################2                                                                                                                       | 96/375 [00:00&lt;00:02, 115.45it/s]
 29%|##############################################                                                                                                                  | 108/375 [00:00&lt;00:02, 114.74it/s]
 32%|###################################################2                                                                                                            | 120/375 [00:01&lt;00:02, 113.74it/s]
 35%|########################################################3                                                                                                       | 132/375 [00:01&lt;00:02, 113.58it/s]
 38%|#############################################################4                                                                                                  | 144/375 [00:01&lt;00:02, 114.12it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 114.17it/s]
 45%|#######################################################################6                                                                                        | 168/375 [00:01&lt;00:01, 114.54it/s]
 48%|############################################################################8                                                                                   | 180/375 [00:01&lt;00:01, 114.91it/s]
 51%|#################################################################################9                                                                              | 192/375 [00:01&lt;00:01, 115.05it/s]
 54%|#######################################################################################                                                                         | 204/375 [00:01&lt;00:01, 114.82it/s]
 58%|############################################################################################1                                                                   | 216/375 [00:01&lt;00:01, 114.99it/s]
 61%|#################################################################################################2                                                              | 228/375 [00:01&lt;00:01, 114.78it/s]
 64%|######################################################################################################4                                                         | 240/375 [00:02&lt;00:01, 114.09it/s]
 67%|###########################################################################################################5                                                    | 252/375 [00:02&lt;00:01, 113.50it/s]
 70%|################################################################################################################6                                               | 264/375 [00:02&lt;00:00, 114.06it/s]
 74%|#####################################################################################################################7                                          | 276/375 [00:02&lt;00:00, 114.13it/s]
 77%|##########################################################################################################################8                                     | 288/375 [00:02&lt;00:00, 114.50it/s]
 80%|################################################################################################################################                                | 300/375 [00:02&lt;00:00, 114.66it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 114.88it/s]
 86%|##########################################################################################################################################2                     | 324/375 [00:02&lt;00:00, 115.03it/s]
 90%|###############################################################################################################################################3                | 336/375 [00:02&lt;00:00, 114.81it/s]
 93%|####################################################################################################################################################4           | 348/375 [00:03&lt;00:00, 114.67it/s]
 96%|#########################################################################################################################################################6      | 360/375 [00:03&lt;00:00, 114.03it/s]
 99%|##############################################################################################################################################################7 | 372/375 [00:03&lt;00:00, 113.78it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 114.43it/s]
[[ 0.1126982   0.26084342 -0.31412574]
 [-0.14961787 -0.070575    0.5005157 ]
 [ 0.0979817  -0.05547601 -0.25773652]
 ...
 [ 0.04402084 -0.03321305 -0.16234597]
 [-0.02509526 -0.00688601  0.08172779]
 [ 0.060516   -0.11881804 -0.25427028]]
base value: 0.5699071702313964

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  3%|#####1                                                                                                                                                           | 12/375 [00:00&lt;00:03, 114.29it/s]
  6%|##########3                                                                                                                                                      | 24/375 [00:00&lt;00:03, 114.29it/s]
 10%|###############4                                                                                                                                                 | 36/375 [00:00&lt;00:02, 114.15it/s]
 13%|####################6                                                                                                                                            | 48/375 [00:00&lt;00:02, 114.14it/s]
 16%|#########################7                                                                                                                                       | 60/375 [00:00&lt;00:02, 114.58it/s]
 19%|##############################9                                                                                                                                  | 72/375 [00:00&lt;00:02, 114.48it/s]
 22%|####################################                                                                                                                             | 84/375 [00:00&lt;00:02, 114.42it/s]
 26%|#########################################2                                                                                                                       | 96/375 [00:00&lt;00:02, 113.11it/s]
 29%|##############################################                                                                                                                  | 108/375 [00:00&lt;00:02, 113.42it/s]
 32%|###################################################2                                                                                                            | 120/375 [00:01&lt;00:02, 113.69it/s]
 35%|########################################################3                                                                                                       | 132/375 [00:01&lt;00:02, 113.21it/s]
 38%|#############################################################4                                                                                                  | 144/375 [00:01&lt;00:02, 113.86it/s]
 42%|##################################################################5                                                                                             | 156/375 [00:01&lt;00:01, 113.83it/s]
 45%|#######################################################################6                                                                                        | 168/375 [00:01&lt;00:01, 113.96it/s]
 48%|############################################################################8                                                                                   | 180/375 [00:01&lt;00:01, 114.06it/s]
 51%|#################################################################################9                                                                              | 192/375 [00:01&lt;00:01, 114.13it/s]
 54%|#######################################################################################                                                                         | 204/375 [00:01&lt;00:01, 114.18it/s]
 58%|############################################################################################1                                                                   | 216/375 [00:01&lt;00:01, 114.04it/s]
 61%|#################################################################################################2                                                              | 228/375 [00:02&lt;00:01, 113.47it/s]
 64%|######################################################################################################4                                                         | 240/375 [00:02&lt;00:01, 113.84it/s]
 67%|###########################################################################################################5                                                    | 252/375 [00:02&lt;00:01, 112.93it/s]
 70%|################################################################################################################6                                               | 264/375 [00:02&lt;00:00, 113.66it/s]
 74%|#####################################################################################################################7                                          | 276/375 [00:02&lt;00:00, 113.85it/s]
 77%|##########################################################################################################################8                                     | 288/375 [00:02&lt;00:00, 114.63it/s]
 80%|################################################################################################################################                                | 300/375 [00:02&lt;00:00, 114.53it/s]
 83%|#####################################################################################################################################1                          | 312/375 [00:02&lt;00:00, 114.78it/s]
 86%|##########################################################################################################################################2                     | 324/375 [00:02&lt;00:00, 114.76it/s]
 90%|###############################################################################################################################################3                | 336/375 [00:02&lt;00:00, 114.62it/s]
 93%|####################################################################################################################################################4           | 348/375 [00:03&lt;00:00, 114.19it/s]
 96%|#########################################################################################################################################################6      | 360/375 [00:03&lt;00:00, 114.55it/s]
 99%|##############################################################################################################################################################7 | 372/375 [00:03&lt;00:00, 113.82it/s]
100%|################################################################################################################################################################| 375/375 [00:03&lt;00:00, 114.03it/s]

--------------------------------------------------------------------------------
Classifier: SVC(probability=True)
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  2%|###4                                                                                                                                                               | 8/375 [00:00&lt;00:05, 72.73it/s]
  4%|######9                                                                                                                                                           | 16/375 [00:00&lt;00:04, 72.73it/s]
  6%|##########3                                                                                                                                                       | 24/375 [00:00&lt;00:04, 72.73it/s]
  9%|#############8                                                                                                                                                    | 32/375 [00:00&lt;00:04, 72.73it/s]
 11%|#################2                                                                                                                                                | 40/375 [00:00&lt;00:04, 72.44it/s]
 13%|####################7                                                                                                                                             | 48/375 [00:00&lt;00:04, 72.32it/s]
 15%|########################1                                                                                                                                         | 56/375 [00:00&lt;00:04, 72.02it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:00&lt;00:04, 72.45it/s]
 19%|###############################1                                                                                                                                  | 72/375 [00:00&lt;00:04, 71.73it/s]
 21%|##################################5                                                                                                                               | 80/375 [00:01&lt;00:04, 72.03it/s]
 23%|######################################                                                                                                                            | 88/375 [00:01&lt;00:03, 72.24it/s]
 26%|#########################################4                                                                                                                        | 96/375 [00:01&lt;00:03, 72.39it/s]
 28%|############################################6                                                                                                                    | 104/375 [00:01&lt;00:03, 72.49it/s]
 30%|################################################                                                                                                                 | 112/375 [00:01&lt;00:03, 72.39it/s]
 32%|###################################################5                                                                                                             | 120/375 [00:01&lt;00:03, 72.49it/s]
 34%|######################################################9                                                                                                          | 128/375 [00:01&lt;00:03, 71.97it/s]
 36%|##########################################################3                                                                                                      | 136/375 [00:01&lt;00:03, 72.20it/s]
 38%|#############################################################8                                                                                                   | 144/375 [00:01&lt;00:03, 72.36it/s]
 41%|#################################################################2                                                                                               | 152/375 [00:02&lt;00:03, 71.73it/s]
 43%|####################################################################6                                                                                            | 160/375 [00:02&lt;00:02, 71.84it/s]
 45%|########################################################################1                                                                                        | 168/375 [00:02&lt;00:02, 72.10it/s]
 47%|###########################################################################5                                                                                     | 176/375 [00:02&lt;00:02, 72.29it/s]
 49%|##############################################################################9                                                                                  | 184/375 [00:02&lt;00:02, 72.26it/s]
 51%|##################################################################################4                                                                              | 192/375 [00:02&lt;00:02, 72.21it/s]
 53%|#####################################################################################8                                                                           | 200/375 [00:02&lt;00:02, 71.97it/s]
 55%|#########################################################################################3                                                                       | 208/375 [00:02&lt;00:02, 71.81it/s]
 58%|############################################################################################7                                                                    | 216/375 [00:02&lt;00:02, 72.08it/s]
 60%|################################################################################################1                                                                | 224/375 [00:03&lt;00:02, 72.13it/s]
 62%|###################################################################################################6                                                             | 232/375 [00:03&lt;00:01, 71.92it/s]
 64%|#######################################################################################################                                                          | 240/375 [00:03&lt;00:01, 71.96it/s]
 66%|##########################################################################################################4                                                      | 248/375 [00:03&lt;00:01, 72.19it/s]
 68%|#############################################################################################################9                                                   | 256/375 [00:03&lt;00:01, 72.39it/s]
 70%|#################################################################################################################3                                               | 264/375 [00:03&lt;00:01, 72.29it/s]
 73%|####################################################################################################################7                                            | 272/375 [00:03&lt;00:01, 72.50it/s]
 75%|########################################################################################################################2                                        | 280/375 [00:03&lt;00:01, 71.98it/s]
 77%|###########################################################################################################################6                                     | 288/375 [00:03&lt;00:01, 72.40it/s]
 79%|###############################################################################################################################                                  | 296/375 [00:04&lt;00:01, 72.36it/s]
 81%|##################################################################################################################################5                              | 304/375 [00:04&lt;00:00, 72.27it/s]
 83%|#####################################################################################################################################9                           | 312/375 [00:04&lt;00:00, 71.82it/s]
 85%|#########################################################################################################################################3                       | 320/375 [00:04&lt;00:00, 72.09it/s]
 87%|############################################################################################################################################8                    | 328/375 [00:04&lt;00:00, 72.28it/s]
 90%|################################################################################################################################################2                | 336/375 [00:04&lt;00:00, 72.29it/s]
 92%|###################################################################################################################################################6             | 344/375 [00:04&lt;00:00, 72.62it/s]
 94%|#######################################################################################################################################################1         | 352/375 [00:04&lt;00:00, 72.65it/s]
 96%|##########################################################################################################################################################5      | 360/375 [00:04&lt;00:00, 72.28it/s]
 98%|#############################################################################################################################################################9   | 368/375 [00:05&lt;00:00, 72.34it/s]
100%|#################################################################################################################################################################| 375/375 [00:05&lt;00:00, 72.23it/s]
[[-0.00218699 -0.13365071 -0.46267926]
 [ 0.00182056  0.0353105   0.35523678]
 [-0.00307356  0.05099142 -0.4682242 ]
 ...
 [-0.00145361  0.04547659 -0.28537838]
 [ 0.00176705  0.01755795  0.21350667]
 [-0.00318217  0.1109257  -0.38825608]]
base value: 0.6014154468488043

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  2%|###4                                                                                                                                                               | 8/375 [00:00&lt;00:05, 72.07it/s]
  4%|######9                                                                                                                                                           | 16/375 [00:00&lt;00:05, 71.32it/s]
  6%|##########3                                                                                                                                                       | 24/375 [00:00&lt;00:04, 71.95it/s]
  9%|#############8                                                                                                                                                    | 32/375 [00:00&lt;00:04, 72.36it/s]
 11%|#################2                                                                                                                                                | 40/375 [00:00&lt;00:04, 72.49it/s]
 13%|####################7                                                                                                                                             | 48/375 [00:00&lt;00:04, 72.57it/s]
 15%|########################1                                                                                                                                         | 56/375 [00:00&lt;00:04, 72.19it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:00&lt;00:04, 72.39it/s]
 19%|###############################1                                                                                                                                  | 72/375 [00:00&lt;00:04, 72.55it/s]
 21%|##################################5                                                                                                                               | 80/375 [00:01&lt;00:04, 72.81it/s]
 23%|######################################                                                                                                                            | 88/375 [00:01&lt;00:03, 72.78it/s]
 26%|#########################################4                                                                                                                        | 96/375 [00:01&lt;00:03, 72.17it/s]
 28%|############################################6                                                                                                                    | 104/375 [00:01&lt;00:03, 72.41it/s]
 30%|################################################                                                                                                                 | 112/375 [00:01&lt;00:03, 72.50it/s]
 32%|###################################################5                                                                                                             | 120/375 [00:01&lt;00:03, 72.77it/s]
 34%|######################################################9                                                                                                          | 128/375 [00:01&lt;00:03, 72.76it/s]
 36%|##########################################################3                                                                                                      | 136/375 [00:01&lt;00:03, 72.44it/s]
 38%|#############################################################8                                                                                                   | 144/375 [00:01&lt;00:03, 72.41it/s]
 41%|#################################################################2                                                                                               | 152/375 [00:02&lt;00:03, 72.70it/s]
 43%|####################################################################6                                                                                            | 160/375 [00:02&lt;00:02, 72.71it/s]
 45%|########################################################################1                                                                                        | 168/375 [00:02&lt;00:02, 72.12it/s]
 47%|###########################################################################5                                                                                     | 176/375 [00:02&lt;00:02, 71.96it/s]
 49%|##############################################################################9                                                                                  | 184/375 [00:02&lt;00:02, 72.38it/s]
 51%|##################################################################################4                                                                              | 192/375 [00:02&lt;00:02, 72.68it/s]
 53%|#####################################################################################8                                                                           | 200/375 [00:02&lt;00:02, 72.70it/s]
 55%|#########################################################################################3                                                                       | 208/375 [00:02&lt;00:02, 72.51it/s]
 58%|############################################################################################7                                                                    | 216/375 [00:02&lt;00:02, 72.28it/s]
 60%|################################################################################################1                                                                | 224/375 [00:03&lt;00:02, 72.41it/s]
 62%|###################################################################################################6                                                             | 232/375 [00:03&lt;00:01, 72.51it/s]
 64%|#######################################################################################################                                                          | 240/375 [00:03&lt;00:01, 72.57it/s]
 66%|##########################################################################################################4                                                      | 248/375 [00:03&lt;00:01, 72.42it/s]
 68%|#############################################################################################################9                                                   | 256/375 [00:03&lt;00:01, 72.18it/s]
 70%|#################################################################################################################3                                               | 264/375 [00:03&lt;00:01, 72.34it/s]
 73%|####################################################################################################################7                                            | 272/375 [00:03&lt;00:01, 72.46it/s]
 75%|########################################################################################################################2                                        | 280/375 [00:03&lt;00:01, 72.74it/s]
 77%|###########################################################################################################################6                                     | 288/375 [00:03&lt;00:01, 72.08it/s]
 79%|###############################################################################################################################                                  | 296/375 [00:04&lt;00:01, 72.27it/s]
 81%|##################################################################################################################################5                              | 304/375 [00:04&lt;00:00, 72.61it/s]
 83%|#####################################################################################################################################9                           | 312/375 [00:04&lt;00:00, 72.64it/s]
 85%|#########################################################################################################################################3                       | 320/375 [00:04&lt;00:00, 72.67it/s]
 87%|############################################################################################################################################8                    | 328/375 [00:04&lt;00:00, 72.35it/s]
 90%|################################################################################################################################################2                | 336/375 [00:04&lt;00:00, 72.27it/s]
 92%|###################################################################################################################################################6             | 344/375 [00:04&lt;00:00, 72.60it/s]
 94%|#######################################################################################################################################################1         | 352/375 [00:04&lt;00:00, 72.64it/s]
 96%|##########################################################################################################################################################5      | 360/375 [00:04&lt;00:00, 72.78it/s]
 98%|#############################################################################################################################################################9   | 368/375 [00:05&lt;00:00, 72.24it/s]
100%|#################################################################################################################################################################| 375/375 [00:05&lt;00:00, 72.43it/s]

--------------------------------------------------------------------------------
Classifier: ExtraTreesClassifier()
Kernel type: &lt;class &#39;shap.explainers._kernel.Kernel&#39;&gt;

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  1%|#7                                                                                                                                                                 | 4/375 [00:00&lt;00:09, 39.60it/s]
  2%|###4                                                                                                                                                               | 8/375 [00:00&lt;00:09, 38.70it/s]
  3%|#####1                                                                                                                                                            | 12/375 [00:00&lt;00:09, 38.19it/s]
  4%|######9                                                                                                                                                           | 16/375 [00:00&lt;00:09, 37.73it/s]
  5%|########6                                                                                                                                                         | 20/375 [00:00&lt;00:09, 37.86it/s]
  6%|##########3                                                                                                                                                       | 24/375 [00:00&lt;00:09, 38.31it/s]
  7%|############                                                                                                                                                      | 28/375 [00:00&lt;00:09, 38.24it/s]
  9%|#############8                                                                                                                                                    | 32/375 [00:00&lt;00:09, 37.98it/s]
 10%|###############5                                                                                                                                                  | 36/375 [00:00&lt;00:08, 37.90it/s]
 11%|#################2                                                                                                                                                | 40/375 [00:01&lt;00:08, 38.07it/s]
 12%|###################                                                                                                                                               | 44/375 [00:01&lt;00:08, 38.30it/s]
 13%|####################7                                                                                                                                             | 48/375 [00:01&lt;00:08, 38.29it/s]
 14%|######################4                                                                                                                                           | 52/375 [00:01&lt;00:08, 38.32it/s]
 15%|########################1                                                                                                                                         | 56/375 [00:01&lt;00:08, 37.77it/s]
 16%|#########################9                                                                                                                                        | 60/375 [00:01&lt;00:08, 38.08it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:01&lt;00:08, 38.09it/s]
 18%|#############################3                                                                                                                                    | 68/375 [00:01&lt;00:08, 38.06it/s]
 19%|###############################1                                                                                                                                  | 72/375 [00:01&lt;00:08, 37.74it/s]
 20%|################################8                                                                                                                                 | 76/375 [00:01&lt;00:07, 37.96it/s]
 21%|##################################5                                                                                                                               | 80/375 [00:02&lt;00:07, 38.11it/s]
 22%|####################################2                                                                                                                             | 84/375 [00:02&lt;00:07, 38.21it/s]
 23%|######################################                                                                                                                            | 88/375 [00:02&lt;00:07, 38.56it/s]
 25%|#######################################7                                                                                                                          | 92/375 [00:02&lt;00:07, 38.64it/s]
 26%|#########################################4                                                                                                                        | 96/375 [00:02&lt;00:07, 38.37it/s]
 27%|##########################################9                                                                                                                      | 100/375 [00:02&lt;00:07, 38.18it/s]
 28%|############################################6                                                                                                                    | 104/375 [00:02&lt;00:07, 38.26it/s]
 29%|##############################################3                                                                                                                  | 108/375 [00:02&lt;00:06, 38.45it/s]
 30%|################################################                                                                                                                 | 112/375 [00:02&lt;00:06, 38.13it/s]
 31%|#################################################8                                                                                                               | 116/375 [00:03&lt;00:06, 37.90it/s]
 32%|###################################################5                                                                                                             | 120/375 [00:03&lt;00:06, 38.07it/s]
 33%|#####################################################2                                                                                                           | 124/375 [00:03&lt;00:06, 38.52it/s]
 34%|######################################################9                                                                                                          | 128/375 [00:03&lt;00:06, 38.50it/s]
 35%|########################################################6                                                                                                        | 132/375 [00:03&lt;00:06, 38.49it/s]
 36%|##########################################################3                                                                                                      | 136/375 [00:03&lt;00:06, 38.26it/s]
 37%|############################################################1                                                                                                    | 140/375 [00:03&lt;00:06, 37.56it/s]
 38%|#############################################################8                                                                                                   | 144/375 [00:03&lt;00:06, 37.94it/s]
 39%|###############################################################5                                                                                                 | 148/375 [00:03&lt;00:05, 37.98it/s]
 41%|#################################################################2                                                                                               | 152/375 [00:03&lt;00:05, 38.34it/s]
 42%|##################################################################9                                                                                              | 156/375 [00:04&lt;00:05, 37.83it/s]
 43%|####################################################################6                                                                                            | 160/375 [00:04&lt;00:05, 37.91it/s]
 44%|######################################################################4                                                                                          | 164/375 [00:04&lt;00:05, 38.16it/s]
 45%|########################################################################1                                                                                        | 168/375 [00:04&lt;00:05, 38.20it/s]
 46%|#########################################################################8                                                                                       | 172/375 [00:04&lt;00:05, 38.28it/s]
 47%|###########################################################################5                                                                                     | 176/375 [00:04&lt;00:05, 38.22it/s]
 48%|#############################################################################2                                                                                   | 180/375 [00:04&lt;00:05, 37.86it/s]
 49%|##############################################################################9                                                                                  | 184/375 [00:04&lt;00:05, 37.97it/s]
 50%|################################################################################7                                                                                | 188/375 [00:04&lt;00:04, 38.00it/s]
 51%|##################################################################################4                                                                              | 192/375 [00:05&lt;00:04, 38.14it/s]
 52%|####################################################################################1                                                                            | 196/375 [00:05&lt;00:04, 38.13it/s]
 53%|#####################################################################################8                                                                           | 200/375 [00:05&lt;00:04, 38.23it/s]
 54%|#######################################################################################5                                                                         | 204/375 [00:05&lt;00:04, 38.21it/s]
 55%|#########################################################################################3                                                                       | 208/375 [00:05&lt;00:04, 38.40it/s]
 57%|###########################################################################################                                                                      | 212/375 [00:05&lt;00:04, 38.31it/s]
 58%|############################################################################################7                                                                    | 216/375 [00:05&lt;00:04, 38.46it/s]
 59%|##############################################################################################4                                                                  | 220/375 [00:05&lt;00:04, 38.02it/s]
 60%|################################################################################################1                                                                | 224/375 [00:05&lt;00:04, 37.72it/s]
 61%|#################################################################################################8                                                               | 228/375 [00:05&lt;00:03, 37.83it/s]
 62%|###################################################################################################6                                                             | 232/375 [00:06&lt;00:03, 38.02it/s]
 63%|#####################################################################################################3                                                           | 236/375 [00:06&lt;00:03, 37.72it/s]
 64%|#######################################################################################################                                                          | 240/375 [00:06&lt;00:03, 37.94it/s]
 65%|########################################################################################################7                                                        | 244/375 [00:06&lt;00:03, 38.00it/s]
 66%|##########################################################################################################4                                                      | 248/375 [00:06&lt;00:03, 38.14it/s]
 67%|############################################################################################################1                                                    | 252/375 [00:06&lt;00:03, 38.50it/s]
 68%|#############################################################################################################9                                                   | 256/375 [00:06&lt;00:03, 38.49it/s]
 69%|###############################################################################################################6                                                 | 260/375 [00:06&lt;00:02, 38.70it/s]
 70%|#################################################################################################################3                                               | 264/375 [00:06&lt;00:02, 38.00it/s]
 71%|###################################################################################################################                                              | 268/375 [00:07&lt;00:02, 38.03it/s]
 73%|####################################################################################################################7                                            | 272/375 [00:07&lt;00:02, 38.27it/s]
 74%|######################################################################################################################4                                          | 276/375 [00:07&lt;00:02, 37.89it/s]
 75%|########################################################################################################################2                                        | 280/375 [00:07&lt;00:02, 37.95it/s]
 76%|#########################################################################################################################9                                       | 284/375 [00:07&lt;00:02, 38.03it/s]
 77%|###########################################################################################################################6                                     | 288/375 [00:07&lt;00:02, 38.27it/s]
 78%|#############################################################################################################################3                                   | 292/375 [00:07&lt;00:02, 38.33it/s]
 79%|###############################################################################################################################                                  | 296/375 [00:07&lt;00:02, 38.37it/s]
 80%|################################################################################################################################8                                | 300/375 [00:07&lt;00:01, 38.38it/s]
 81%|##################################################################################################################################5                              | 304/375 [00:07&lt;00:01, 38.18it/s]
 82%|####################################################################################################################################2                            | 308/375 [00:08&lt;00:01, 38.14it/s]
 83%|#####################################################################################################################################9                           | 312/375 [00:08&lt;00:01, 38.35it/s]
 84%|#######################################################################################################################################6                         | 316/375 [00:08&lt;00:01, 37.88it/s]
 85%|#########################################################################################################################################3                       | 320/375 [00:08&lt;00:01, 38.19it/s]
 86%|###########################################################################################################################################1                     | 324/375 [00:08&lt;00:01, 38.49it/s]
 87%|############################################################################################################################################8                    | 328/375 [00:08&lt;00:01, 38.59it/s]
 89%|##############################################################################################################################################5                  | 332/375 [00:08&lt;00:01, 38.55it/s]
 90%|################################################################################################################################################2                | 336/375 [00:08&lt;00:01, 38.30it/s]
 91%|#################################################################################################################################################9               | 340/375 [00:08&lt;00:00, 38.14it/s]
 92%|###################################################################################################################################################6             | 344/375 [00:09&lt;00:00, 38.24it/s]
 93%|#####################################################################################################################################################4           | 348/375 [00:09&lt;00:00, 37.98it/s]
 94%|#######################################################################################################################################################1         | 352/375 [00:09&lt;00:00, 38.01it/s]
 95%|########################################################################################################################################################8        | 356/375 [00:09&lt;00:00, 37.50it/s]
 96%|##########################################################################################################################################################5      | 360/375 [00:09&lt;00:00, 37.49it/s]
 97%|############################################################################################################################################################2    | 364/375 [00:09&lt;00:00, 37.67it/s]
 98%|#############################################################################################################################################################9   | 368/375 [00:09&lt;00:00, 37.80it/s]
 99%|###############################################################################################################################################################7 | 372/375 [00:09&lt;00:00, 37.99it/s]
100%|#################################################################################################################################################################| 375/375 [00:09&lt;00:00, 38.13it/s]
[[-0.17706667 -0.12341667 -0.28951667]
 [ 0.11991667  0.04886667  0.24121667]
 [ 0.1255      0.35165    -0.06715   ]
 ...
 [-0.1511     -0.09635    -0.34255   ]
 [-0.16761667 -0.23371667 -0.18866667]
 [-0.21821667  0.00463333 -0.37641667]]
base value: 0.5900000000000001

  0%|                                                                                                                                                                           | 0/375 [00:00&lt;?, ?it/s]
  1%|#7                                                                                                                                                                 | 4/375 [00:00&lt;00:10, 34.22it/s]
  2%|###4                                                                                                                                                               | 8/375 [00:00&lt;00:10, 34.37it/s]
  3%|#####1                                                                                                                                                            | 12/375 [00:00&lt;00:10, 34.42it/s]
  4%|######9                                                                                                                                                           | 16/375 [00:00&lt;00:10, 34.57it/s]
  5%|########6                                                                                                                                                         | 20/375 [00:00&lt;00:10, 32.67it/s]
  6%|##########3                                                                                                                                                       | 24/375 [00:00&lt;00:11, 30.90it/s]
  7%|############                                                                                                                                                      | 28/375 [00:00&lt;00:10, 32.67it/s]
  9%|#############8                                                                                                                                                    | 32/375 [00:00&lt;00:10, 34.13it/s]
 10%|###############5                                                                                                                                                  | 36/375 [00:01&lt;00:09, 34.69it/s]
 11%|#################2                                                                                                                                                | 40/375 [00:01&lt;00:09, 35.22it/s]
 12%|###################                                                                                                                                               | 44/375 [00:01&lt;00:09, 35.86it/s]
 13%|####################7                                                                                                                                             | 48/375 [00:01&lt;00:09, 35.24it/s]
 14%|######################4                                                                                                                                           | 52/375 [00:01&lt;00:09, 35.10it/s]
 15%|########################1                                                                                                                                         | 56/375 [00:01&lt;00:09, 35.34it/s]
 16%|#########################9                                                                                                                                        | 60/375 [00:01&lt;00:08, 35.45it/s]
 17%|###########################6                                                                                                                                      | 64/375 [00:01&lt;00:08, 35.16it/s]
 18%|#############################3                                                                                                                                    | 68/375 [00:01&lt;00:08, 34.86it/s]
 19%|###############################1                                                                                                                                  | 72/375 [00:02&lt;00:08, 35.34it/s]
 20%|################################8                                                                                                                                 | 76/375 [00:02&lt;00:08, 35.12it/s]
 21%|##################################5                                                                                                                               | 80/375 [00:02&lt;00:08, 35.48it/s]
 22%|####################################2                                                                                                                             | 84/375 [00:02&lt;00:08, 36.13it/s]
 23%|######################################                                                                                                                            | 88/375 [00:02&lt;00:07, 36.40it/s]
 25%|#######################################7                                                                                                                          | 92/375 [00:02&lt;00:07, 35.61it/s]
 26%|#########################################4                                                                                                                        | 96/375 [00:02&lt;00:07, 35.26it/s]
 27%|##########################################9                                                                                                                      | 100/375 [00:02&lt;00:07, 36.27it/s]
 28%|############################################6                                                                                                                    | 104/375 [00:02&lt;00:07, 36.90it/s]
 29%|##############################################3                                                                                                                  | 108/375 [00:03&lt;00:07, 37.36it/s]
 30%|################################################                                                                                                                 | 112/375 [00:03&lt;00:07, 37.45it/s]
 31%|#################################################8                                                                                                               | 116/375 [00:03&lt;00:06, 37.75it/s]
 32%|###################################################5                                                                                                             | 120/375 [00:03&lt;00:06, 37.96it/s]
 33%|#####################################################2                                                                                                           | 124/375 [00:03&lt;00:06, 38.26it/s]
 34%|######################################################9                                                                                                          | 128/375 [00:03&lt;00:06, 38.43it/s]
 35%|########################################################6                                                                                                        | 132/375 [00:03&lt;00:06, 38.04it/s]
 36%|##########################################################3                                                                                                      | 136/375 [00:03&lt;00:06, 37.52it/s]
 37%|############################################################1                                                                                                    | 140/375 [00:03&lt;00:06, 37.69it/s]
 38%|#############################################################8                                                                                                   | 144/375 [00:04&lt;00:06, 38.03it/s]
 39%|###############################################################5                                                                                                 | 148/375 [00:04&lt;00:05, 38.00it/s]
 41%|#################################################################2                                                                                               | 152/375 [00:04&lt;00:05, 38.33it/s]
 42%|##################################################################9                                                                                              | 156/375 [00:04&lt;00:05, 38.26it/s]
 43%|####################################################################6                                                                                            | 160/375 [00:04&lt;00:05, 38.10it/s]
 44%|######################################################################4                                                                                          | 164/375 [00:04&lt;00:05, 38.10it/s]
 45%|########################################################################1                                                                                        | 168/375 [00:04&lt;00:05, 37.81it/s]
 46%|#########################################################################8                                                                                       | 172/375 [00:04&lt;00:05, 37.37it/s]
 47%|###########################################################################5                                                                                     | 176/375 [00:04&lt;00:05, 37.16it/s]
 48%|#############################################################################2                                                                                   | 180/375 [00:04&lt;00:05, 37.45it/s]
 49%|##############################################################################9                                                                                  | 184/375 [00:05&lt;00:05, 37.75it/s]
 50%|################################################################################7                                                                                | 188/375 [00:05&lt;00:04, 37.98it/s]
 51%|##################################################################################4                                                                              | 192/375 [00:05&lt;00:04, 38.12it/s]
 52%|####################################################################################1                                                                            | 196/375 [00:05&lt;00:04, 38.55it/s]
 53%|#####################################################################################8                                                                           | 200/375 [00:05&lt;00:04, 38.42it/s]
 54%|#######################################################################################5                                                                         | 204/375 [00:05&lt;00:04, 37.25it/s]
 55%|#########################################################################################3                                                                       | 208/375 [00:05&lt;00:04, 34.33it/s]
 57%|###########################################################################################                                                                      | 212/375 [00:05&lt;00:05, 31.38it/s]
 58%|############################################################################################7                                                                    | 216/375 [00:06&lt;00:05, 31.64it/s]
 59%|##############################################################################################4                                                                  | 220/375 [00:06&lt;00:04, 32.44it/s]
 60%|################################################################################################1                                                                | 224/375 [00:06&lt;00:04, 33.12it/s]
 61%|#################################################################################################8                                                               | 228/375 [00:06&lt;00:04, 33.68it/s]
 62%|###################################################################################################6                                                             | 232/375 [00:06&lt;00:04, 34.71it/s]
 63%|#####################################################################################################3                                                           | 236/375 [00:06&lt;00:03, 35.10it/s]
 64%|#######################################################################################################                                                          | 240/375 [00:06&lt;00:03, 35.56it/s]
 65%|########################################################################################################7                                                        | 244/375 [00:06&lt;00:03, 34.80it/s]
 66%|##########################################################################################################4                                                      | 248/375 [00:06&lt;00:03, 35.63it/s]
 67%|############################################################################################################1                                                    | 252/375 [00:07&lt;00:03, 35.10it/s]
 68%|#############################################################################################################9                                                   | 256/375 [00:07&lt;00:03, 35.56it/s]
 69%|###############################################################################################################6                                                 | 260/375 [00:07&lt;00:03, 35.64it/s]
 70%|#################################################################################################################3                                               | 264/375 [00:07&lt;00:03, 35.57it/s]
 71%|###################################################################################################################                                              | 268/375 [00:07&lt;00:02, 36.09it/s]
 73%|####################################################################################################################7                                            | 272/375 [00:07&lt;00:02, 36.37it/s]
 74%|######################################################################################################################4                                          | 276/375 [00:07&lt;00:02, 36.27it/s]
 75%|########################################################################################################################2                                        | 280/375 [00:07&lt;00:02, 34.69it/s]
 76%|#########################################################################################################################9                                       | 284/375 [00:07&lt;00:02, 33.42it/s]
 77%|###########################################################################################################################6                                     | 288/375 [00:08&lt;00:02, 34.07it/s]
 78%|#############################################################################################################################3                                   | 292/375 [00:08&lt;00:02, 34.64it/s]
 79%|###############################################################################################################################                                  | 296/375 [00:08&lt;00:02, 35.44it/s]
 80%|################################################################################################################################8                                | 300/375 [00:08&lt;00:02, 36.20it/s]
 81%|##################################################################################################################################5                              | 304/375 [00:08&lt;00:01, 36.99it/s]
 82%|####################################################################################################################################2                            | 308/375 [00:08&lt;00:01, 37.52it/s]
 83%|#####################################################################################################################################9                           | 312/375 [00:08&lt;00:01, 37.81it/s]
 84%|#######################################################################################################################################6                         | 316/375 [00:08&lt;00:01, 37.90it/s]
 85%|#########################################################################################################################################3                       | 320/375 [00:08&lt;00:01, 38.06it/s]
 86%|###########################################################################################################################################1                     | 324/375 [00:09&lt;00:01, 38.29it/s]
 87%|############################################################################################################################################8                    | 328/375 [00:09&lt;00:01, 38.12it/s]
 89%|##############################################################################################################################################5                  | 332/375 [00:09&lt;00:01, 37.40it/s]
 90%|################################################################################################################################################2                | 336/375 [00:09&lt;00:01, 37.50it/s]
 91%|#################################################################################################################################################9               | 340/375 [00:09&lt;00:00, 37.68it/s]
 92%|###################################################################################################################################################6             | 344/375 [00:09&lt;00:00, 37.69it/s]
 93%|#####################################################################################################################################################4           | 348/375 [00:09&lt;00:00, 38.14it/s]
 94%|#######################################################################################################################################################1         | 352/375 [00:09&lt;00:00, 38.13it/s]
 95%|########################################################################################################################################################8        | 356/375 [00:09&lt;00:00, 38.12it/s]
 96%|##########################################################################################################################################################5      | 360/375 [00:09&lt;00:00, 38.22it/s]
 97%|############################################################################################################################################################2    | 364/375 [00:10&lt;00:00, 38.18it/s]
 98%|#############################################################################################################################################################9   | 368/375 [00:10&lt;00:00, 38.16it/s]
 99%|###############################################################################################################################################################7 | 372/375 [00:10&lt;00:00, 37.51it/s]
100%|#################################################################################################################################################################| 375/375 [00:10&lt;00:00, 36.21it/s]
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">  6</span> <span class="c1"># Generic</span>
<span class="linenos">  7</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">  8</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="linenos">  9</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="linenos"> 10</span>
<span class="linenos"> 11</span> <span class="c1"># Sklearn</span>
<span class="linenos"> 12</span> <span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="linenos"> 13</span> <span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="linenos"> 14</span> <span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_breast_cancer</span>
<span class="linenos"> 15</span> <span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="linenos"> 16</span> <span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="linenos"> 17</span> <span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="linenos"> 18</span> <span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="linenos"> 19</span> <span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="linenos"> 20</span> <span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">ExtraTreesClassifier</span>
<span class="linenos"> 21</span> <span class="kn">from</span> <span class="nn">sklearn.neural_network</span> <span class="kn">import</span> <span class="n">MLPClassifier</span>
<span class="linenos"> 22</span> <span class="kn">from</span> <span class="nn">sklearn.calibration</span> <span class="kn">import</span> <span class="n">CalibratedClassifierCV</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span> <span class="c1"># Xgboost</span>
<span class="linenos"> 25</span> <span class="kn">from</span> <span class="nn">xgboost</span> <span class="kn">import</span> <span class="n">XGBClassifier</span>
<span class="linenos"> 26</span>
<span class="linenos"> 27</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 28</span> <span class="c1"># Load data</span>
<span class="linenos"> 29</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 30</span> <span class="c1"># Seed</span>
<span class="linenos"> 31</span> <span class="n">seed</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos"> 32</span>
<span class="linenos"> 33</span> <span class="c1"># Load dataset</span>
<span class="linenos"> 34</span> <span class="n">bunch</span> <span class="o">=</span> <span class="n">load_iris</span><span class="p">()</span>
<span class="linenos"> 35</span> <span class="n">bunch</span> <span class="o">=</span> <span class="n">load_breast_cancer</span><span class="p">()</span>
<span class="linenos"> 36</span> <span class="n">features</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bunch</span><span class="p">[</span><span class="s1">&#39;feature_names&#39;</span><span class="p">])</span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span> <span class="c1"># Create DataFrame</span>
<span class="linenos"> 39</span> <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">bunch</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="n">bunch</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span>
<span class="linenos"> 40</span>                     <span class="n">columns</span><span class="o">=</span><span class="n">features</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>
<span class="linenos"> 41</span>
<span class="linenos"> 42</span> <span class="c1"># Create X, y</span>
<span class="linenos"> 43</span> <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">bunch</span><span class="p">[</span><span class="s1">&#39;feature_names&#39;</span><span class="p">]]</span>
<span class="linenos"> 44</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span> <span class="c1"># Filter</span>
<span class="linenos"> 47</span> <span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">500</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos"> 48</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span>
<span class="linenos"> 49</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span> <span class="c1"># Split dataset</span>
<span class="linenos"> 52</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> \
<span class="linenos"> 53</span>     <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span>
<span class="linenos"> 56</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 57</span> <span class="c1"># Classifiers</span>
<span class="linenos"> 58</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 59</span> <span class="c1"># Train classifier</span>
<span class="linenos"> 60</span> <span class="n">gnb</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="linenos"> 61</span> <span class="n">llr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="linenos"> 62</span> <span class="n">dtc</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<span class="linenos"> 63</span> <span class="n">rfc</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
<span class="linenos"> 64</span> <span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span>
<span class="linenos"> 65</span>     <span class="n">min_child_weight</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span>
<span class="linenos"> 66</span>     <span class="n">eta</span><span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
<span class="linenos"> 67</span>     <span class="n">max_depth</span><span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 68</span>     <span class="n">n_estimators</span><span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos"> 69</span> <span class="n">ann</span> <span class="o">=</span> <span class="n">MLPClassifier</span><span class="p">()</span>
<span class="linenos"> 70</span> <span class="n">svm</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">probability</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 71</span> <span class="n">etc</span> <span class="o">=</span> <span class="n">ExtraTreesClassifier</span><span class="p">()</span>
<span class="linenos"> 72</span>
<span class="linenos"> 73</span> <span class="c1"># List</span>
<span class="linenos"> 74</span> <span class="n">clfs</span> <span class="o">=</span> <span class="p">[</span><span class="n">gnb</span><span class="p">,</span> <span class="n">llr</span><span class="p">,</span> <span class="n">dtc</span><span class="p">,</span> <span class="n">rfc</span><span class="p">,</span> <span class="n">xgb</span><span class="p">,</span> <span class="n">ann</span><span class="p">,</span> <span class="n">svm</span><span class="p">,</span> <span class="n">etc</span><span class="p">]</span>
<span class="linenos"> 75</span> <span class="c1">#clfs = [svm, dtc]</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span> <span class="c1"># Fit</span>
<span class="linenos"> 78</span> <span class="k">for</span> <span class="n">clf</span> <span class="ow">in</span> <span class="n">clfs</span><span class="p">:</span>
<span class="linenos"> 79</span>     <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="linenos"> 80</span>
<span class="linenos"> 81</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 82</span> <span class="c1"># Find shap values</span>
<span class="linenos"> 83</span> <span class="c1"># ----------------------------------------</span>
<span class="linenos"> 84</span> <span class="c1"># Possible explainers:</span>
<span class="linenos"> 85</span> <span class="c1">#    - shap.DeepExplainer</span>
<span class="linenos"> 86</span> <span class="c1">#    - shap.KernelExplainer</span>
<span class="linenos"> 87</span> <span class="c1">#    - shap.TreeExplainer</span>
<span class="linenos"> 88</span> <span class="c1">#    - shap.LinearExplainer</span>
<span class="linenos"> 89</span> <span class="c1">#    - shap.Exact</span>
<span class="linenos"> 90</span> <span class="c1">#    - shap.Explainer</span>
<span class="linenos"> 91</span>
<span class="linenos"> 92</span> <span class="c1"># Import</span>
<span class="linenos"> 93</span> <span class="kn">import</span> <span class="nn">shap</span>
<span class="linenos"> 94</span>
<span class="linenos"> 95</span> <span class="c1"># Initialise</span>
<span class="linenos"> 96</span> <span class="n">shap</span><span class="o">.</span><span class="n">initjs</span><span class="p">()</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span> <span class="k">def</span> <span class="nf">predict_proba</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="linenos">100</span>     <span class="k">return</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">x</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="linenos">101</span>
<span class="linenos">102</span> <span class="c1"># Loop</span>
<span class="linenos">103</span> <span class="k">for</span> <span class="n">clf</span> <span class="ow">in</span> <span class="n">clfs</span><span class="p">:</span>
<span class="linenos">104</span>
<span class="linenos">105</span>     <span class="k">try</span><span class="p">:</span>
<span class="linenos">106</span>         <span class="c1"># Show classifier</span>
<span class="linenos">107</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
<span class="linenos">108</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Classifier: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">clf</span><span class="p">)</span>
<span class="linenos">109</span>
<span class="linenos">110</span>         <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">111</span><span class="sd">         # Create shap explainer</span>
<span class="linenos">112</span><span class="sd">         if isinstance(clf,</span>
<span class="linenos">113</span><span class="sd">             (DecisionTreeClassifier,</span>
<span class="linenos">114</span><span class="sd">              ExtraTreesClassifier,</span>
<span class="linenos">115</span><span class="sd">              XGBClassifier)):</span>
<span class="linenos">116</span><span class="sd">             # Set Tree explainer</span>
<span class="linenos">117</span><span class="sd">             explainer = shap.TreeExplainer(clf)</span>
<span class="linenos">118</span><span class="sd">         elif isinstance(clf, LogisticRegression):</span>
<span class="linenos">119</span><span class="sd">             # Masker</span>
<span class="linenos">120</span><span class="sd">             masker = shap.maskers.Independent(X_train, max_samples=100)</span>
<span class="linenos">121</span><span class="sd">             # Set Linear explainer</span>
<span class="linenos">122</span><span class="sd">             #explainer = shap.LinearExplainer(predict_proba)#, masker)</span>
<span class="linenos">123</span><span class="sd">             explainer = shap.Explainer(predict_proba, masker)</span>
<span class="linenos">124</span><span class="sd">         elif isinstance(clf, int):</span>
<span class="linenos">125</span><span class="sd">             # Set NN explainer</span>
<span class="linenos">126</span><span class="sd">             explainer = shap.DeepExplainer(clf)</span>
<span class="linenos">127</span><span class="sd">         else:</span>
<span class="linenos">128</span><span class="sd">             # Works for [svc]</span>
<span class="linenos">129</span><span class="sd">             # If too many examples (pass aux to explainer).</span>
<span class="linenos">130</span><span class="sd">             aux = shap.sample(X_train, 100)</span>
<span class="linenos">131</span><span class="sd">             # Set generic kernel explainer</span>
<span class="linenos">132</span><span class="sd">             explainer = shap.KernelExplainer(predict_proba, aux)</span>
<span class="linenos">133</span><span class="sd">         &quot;&quot;&quot;</span>
<span class="linenos">134</span>
<span class="linenos">135</span>         <span class="c1"># Sample to speed up processing.</span>
<span class="linenos">136</span>         <span class="n">sample</span> <span class="o">=</span> <span class="n">shap</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos">137</span>
<span class="linenos">138</span>         <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">XGBClassifier</span><span class="p">):</span>
<span class="linenos">139</span>             <span class="c1"># Works for [llr, dtc, etc, xgb]</span>
<span class="linenos">140</span>             <span class="n">explainer</span> <span class="o">=</span> <span class="n">shap</span><span class="o">.</span><span class="n">Explainer</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="linenos">141</span>         <span class="k">else</span><span class="p">:</span>
<span class="linenos">142</span>             <span class="c1"># Works for all but [xgb]</span>
<span class="linenos">143</span>             <span class="n">explainer</span> <span class="o">=</span> <span class="n">shap</span><span class="o">.</span><span class="n">KernelExplainer</span><span class="p">(</span><span class="n">predict_proba</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="linenos">144</span>
<span class="linenos">145</span>         <span class="c1"># Show kernel type</span>
<span class="linenos">146</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Kernel type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">explainer</span><span class="p">))</span>
<span class="linenos">147</span>
<span class="linenos">148</span>         <span class="c1"># Get shap values</span>
<span class="linenos">149</span>         <span class="c1">#shap_values = explainer(X)</span>
<span class="linenos">150</span>         <span class="n">shap_values</span> <span class="o">=</span> <span class="n">explainer</span><span class="o">.</span><span class="n">shap_values</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="linenos">151</span>
<span class="linenos">152</span>         <span class="nb">print</span><span class="p">(</span><span class="n">shap_values</span><span class="p">)</span>
<span class="linenos">153</span>
<span class="linenos">154</span>
<span class="linenos">155</span>         <span class="c1"># Show information</span>
<span class="linenos">156</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;base value: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> \
<span class="linenos">157</span>               <span class="n">explainer</span><span class="o">.</span><span class="n">expected_value</span><span class="p">)</span>
<span class="linenos">158</span>         <span class="c1">#print(&quot;shap_values: %s&quot; % \</span>
<span class="linenos">159</span>         <span class="c1">#      str(shap_values.shape))</span>
<span class="linenos">160</span>
<span class="linenos">161</span>         <span class="c1"># Summary plot</span>
<span class="linenos">162</span>         <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="linenos">163</span>         <span class="n">plot_summary</span> <span class="o">=</span> <span class="n">shap</span><span class="o">.</span><span class="n">summary_plot</span><span class="p">(</span> \
<span class="linenos">164</span>             <span class="n">explainer</span><span class="o">.</span><span class="n">shap_values</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span>
<span class="linenos">165</span>             <span class="n">X_train</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span>
<span class="linenos">166</span>             <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">167</span>
<span class="linenos">168</span>         <span class="c1"># Format</span>
<span class="linenos">169</span>         <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">170</span>         <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="linenos">171</span>
<span class="linenos">172</span>     <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos">173</span>         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
<span class="linenos">174</span>
<span class="linenos">175</span> <span class="c1"># Show</span>
<span class="linenos">176</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 1 minutes  16.843 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-shap-examples-plot-main02-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/a6d0d317a9d9e2948c4e3440b6469ced/plot_main02.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_main02.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/aa7798d88ad577cc0e604afd87443ac4/plot_main02.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_main02.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bernard Hernandez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>