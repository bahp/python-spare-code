<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Main 07 - 2dbin with manual data &mdash; python-spare-code 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/python_icon_191765.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Main 07 - 2dbin with shap.csv" href="plot_main07_2dbin_shap.html" />
    <link rel="prev" title="Main 07 - 2dbin and sns.heatmap" href="plot_main07_2dbin_heatmap.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            python-spare-code
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage/introduction.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">General</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#explainer-dashboard">Explainer Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#factory-boy">Factory Boy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#jsonpickle">jsonpickle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#ldap">LDAP</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#matplotlib-seaborn">Matplotlib / Seaborn</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plot_main01_imshow.html">Main 01 - <code class="docutils literal notranslate"><span class="pre">mpl.imshow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main02_hexbin.html">Main 02 - <code class="docutils literal notranslate"><span class="pre">mpl.hexbin</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main03_hist2d.html">Main 03 - <code class="docutils literal notranslate"><span class="pre">mpl.hist2d</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main04_gmm_kde.html">Main 04 - Plot GMM and KDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main06_displot.html">Main 06 - <code class="docutils literal notranslate"><span class="pre">sns.displot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main07_2dbin_heatmap.html">Main 07 - 2dbin and <code class="docutils literal notranslate"><span class="pre">sns.heatmap</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Main 07 - 2dbin with manual data</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main07_2dbin_shap.html">Main 07 - 2dbin with shap.csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main07_2dbin_stat.html">Main 07 - 2dbin demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main08_table.html">Main 08 - Plot table with bars</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main09_tripcolor.html">Main 09 - <code class="docutils literal notranslate"><span class="pre">mpl.tripcolor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main10_violin_cmap.html">Main 10 - <code class="docutils literal notranslate"><span class="pre">mpl.violin</span></code> with linear cmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_main_20_animation.html">Main 20 - Animation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pandas">Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pandas-profile">Pandas-profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plotly">Plotly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#scikits">Scikits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#shap">Shap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tableone">TableOne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#other">Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#threshold-moving">Threshold Moving</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tpot">TPOT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#utils">Utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">python-spare-code</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">General</a></li>
      <li class="breadcrumb-item active">Main 07 - 2dbin with manual data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/_examples/matplotlib/plot_main07_2dbin_manual.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-matplotlib-plot-main07-2dbin-manual-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="main-07-2dbin-with-manual-data">
<span id="sphx-glr-examples-matplotlib-plot-main07-2dbin-manual-py"></span><h1>Main 07 - 2dbin with manual data<a class="headerlink" href="#main-07-2dbin-with-manual-data" title="Permalink to this heading">ÔÉÅ</a></h1>
<img src="../../_images/sphx_glr_plot_main07_2dbin_manual_001.png" srcset="../../_images/sphx_glr_plot_main07_2dbin_manual_001.png" alt="C-Reactive Protein, count, median" class = "sphx-glr-single-img"/><p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[1 1 1 1 2 2 2 3]
[1 1 2 2 3 3 4 1]
[1 1 5 6 7 8 7 7]

Scipy:
[0.5 1.5 2.5 3.5 4.5 5.5 6.5]
[1.         1.03030303 1.06060606 1.09090909 1.12121212 1.15151515
 1.18181818 1.21212121 1.24242424 1.27272727 1.3030303  1.33333333
 1.36363636 1.39393939 1.42424242 1.45454545 1.48484848 1.51515152
 1.54545455 1.57575758 1.60606061 1.63636364 1.66666667 1.6969697
 1.72727273 1.75757576 1.78787879 1.81818182 1.84848485 1.87878788
 1.90909091 1.93939394 1.96969697 2.         2.03030303 2.06060606
 2.09090909 2.12121212 2.15151515 2.18181818 2.21212121 2.24242424
 2.27272727 2.3030303  2.33333333 2.36363636 2.39393939 2.42424242
 2.45454545 2.48484848 2.51515152 2.54545455 2.57575758 2.60606061
 2.63636364 2.66666667 2.6969697  2.72727273 2.75757576 2.78787879
 2.81818182 2.84848485 2.87878788 2.90909091 2.93939394 2.96969697
 3.         3.03030303 3.06060606 3.09090909 3.12121212 3.15151515
 3.18181818 3.21212121 3.24242424 3.27272727 3.3030303  3.33333333
 3.36363636 3.39393939 3.42424242 3.45454545 3.48484848 3.51515152
 3.54545455 3.57575758 3.60606061 3.63636364 3.66666667 3.6969697
 3.72727273 3.75757576 3.78787879 3.81818182 3.84848485 3.87878788
 3.90909091 3.93939394 3.96969697 4.        ]
[[2. 0. 1. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [2. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 2. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]
 [0. 1. 0. 0. 0. 0.]]
[1.01515152 1.04545455 1.07575758 1.10606061 1.13636364 1.16666667
 1.1969697  1.22727273 1.25757576 1.28787879 1.31818182 1.34848485
 1.37878788 1.40909091 1.43939394 1.46969697 1.5        1.53030303
 1.56060606 1.59090909 1.62121212 1.65151515 1.68181818 1.71212121
 1.74242424 1.77272727 1.8030303  1.83333333 1.86363636 1.89393939
 1.92424242 1.95454545 1.98484848 2.01515152 2.04545455 2.07575758
 2.10606061 2.13636364 2.16666667 2.1969697  2.22727273 2.25757576
 2.28787879 2.31818182 2.34848485 2.37878788 2.40909091 2.43939394
 2.46969697 2.5        2.53030303 2.56060606 2.59090909 2.62121212
 2.65151515 2.68181818 2.71212121 2.74242424 2.77272727 2.8030303
 2.83333333 2.86363636 2.89393939 2.92424242 2.95454545 2.98484848
 3.01515152 3.04545455 3.07575758 3.10606061 3.13636364 3.16666667
 3.1969697  3.22727273 3.25757576 3.28787879 3.31818182 3.34848485
 3.37878788 3.40909091 3.43939394 3.46969697 3.5        3.53030303
 3.56060606 3.59090909 3.62121212 3.65151515 3.68181818 3.71212121
 3.74242424 3.77272727 3.8030303  3.83333333 3.86363636 3.89393939
 3.92424242 3.95454545 3.98484848]
[1. 2. 3. 4. 5. 6.]

&#39;\nimport sys\nsys.exit()\n# Compute bin statistic (count and median)\n\n# Plot\nplt.figure()\nsns.violinplot(data=data, x=&quot;timestep&quot;, y=&quot;shap_values&quot;, inner=&quot;box&quot;)\nplt.figure()\nplt.tight_layout()\nsns.violinplot(data=data, x=&quot;timestep&quot;, y=&quot;feature_values&quot;, inner=&quot;box&quot;)\nplt.figure()\nsns.histplot(data=data, x=&quot;timestep&quot;, shrink=.8)\n\n\n# Plot hist\nf1 = plt.hist2d(data.timestep, data.feature_values, bins=30, cmap=\&#39;Reds\&#39;)\ncb = plt.colorbar()\ncb.set_label(\&#39;counts in bin\&#39;)\nplt.title(\&#39;Counts (square bin)\&#39;)\nplt.show()\n&#39;
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">  6</span> <span class="c1"># Libraries</span>
<span class="linenos">  7</span> <span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="linenos">  8</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="linenos">  9</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos"> 10</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span> <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="linenos"> 13</span> <span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span>
<span class="linenos"> 14</span>
<span class="linenos"> 15</span> <span class="k">def</span> <span class="nf">data_shap</span><span class="p">():</span>
<span class="linenos"> 16</span>     <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/shap.csv&#39;</span><span class="p">)</span>
<span class="linenos"> 17</span>     <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">timestep</span><span class="p">,</span> \
<span class="linenos"> 18</span>            <span class="n">data</span><span class="o">.</span><span class="n">shap_values</span><span class="p">,</span> \
<span class="linenos"> 19</span>            <span class="n">data</span><span class="o">.</span><span class="n">feature_values</span><span class="p">,</span> \
<span class="linenos"> 20</span>            <span class="n">data</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span> <span class="k">def</span> <span class="nf">data_manual</span><span class="p">():</span>
<span class="linenos"> 23</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
<span class="linenos"> 24</span>     <span class="c1"># Create random values</span>
<span class="linenos"> 25</span>     <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="linenos"> 26</span>     <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="linenos"> 27</span>     <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
<span class="linenos"> 28</span>     <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="kc">None</span>
<span class="linenos"> 29</span>
<span class="linenos"> 30</span> <span class="c1"># Create data</span>
<span class="linenos"> 31</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data_manual</span><span class="p">()</span>
<span class="linenos"> 32</span>
<span class="linenos"> 33</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="linenos"> 34</span> <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="linenos"> 35</span> <span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="linenos"> 36</span>
<span class="linenos"> 37</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 38</span><span class="sd"> # With pandas</span>
<span class="linenos"> 39</span><span class="sd"> v = z</span>
<span class="linenos"> 40</span><span class="sd"> vals, bins = np.histogram(v)</span>
<span class="linenos"> 41</span><span class="sd"> a = pd.Series(v).groupby(pd.cut(v, bins)).median()</span>
<span class="linenos"> 42</span><span class="sd"> print(&quot;\nPandas:&quot;)</span>
<span class="linenos"> 43</span><span class="sd"> print(bins)</span>
<span class="linenos"> 44</span><span class="sd"> print(vals)</span>
<span class="linenos"> 45</span><span class="sd"> print(a)</span>
<span class="linenos"> 46</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="linenos"> 47</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="linenos"> 55</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span> <span class="c1"># Compute binned statistic (median)</span>
<span class="linenos"> 60</span> <span class="n">binx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span>
<span class="linenos"> 61</span> <span class="n">biny</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span>
<span class="linenos"> 62</span> <span class="n">binx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span>
<span class="linenos"> 63</span> <span class="n">biny</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos"> 64</span> <span class="n">r1</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">z</span><span class="p">,</span>
<span class="linenos"> 65</span>     <span class="n">statistic</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">biny</span><span class="p">,</span> <span class="n">binx</span><span class="p">],</span>
<span class="linenos"> 66</span>     <span class="n">expand_binnumbers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 67</span>
<span class="linenos"> 68</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">z</span><span class="p">,</span>
<span class="linenos"> 69</span>     <span class="n">statistic</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">biny</span><span class="p">,</span> <span class="n">binx</span><span class="p">],</span>
<span class="linenos"> 70</span>     <span class="n">expand_binnumbers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 71</span>
<span class="linenos"> 72</span> <span class="c1"># Compute centres</span>
<span class="linenos"> 73</span> <span class="n">x_center</span> <span class="o">=</span> <span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">x_edge</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">r1</span><span class="o">.</span><span class="n">x_edge</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span>
<span class="linenos"> 74</span> <span class="n">y_center</span> <span class="o">=</span> <span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">y_edge</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">r1</span><span class="o">.</span><span class="n">y_edge</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span> <span class="c1"># Show</span>
<span class="linenos"> 77</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Scipy:&quot;</span><span class="p">)</span>
<span class="linenos"> 78</span> <span class="nb">print</span><span class="p">(</span><span class="n">binx</span><span class="p">)</span>
<span class="linenos"> 79</span> <span class="nb">print</span><span class="p">(</span><span class="n">biny</span><span class="p">)</span>
<span class="linenos"> 80</span> <span class="nb">print</span><span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">statistic</span><span class="p">)</span>
<span class="linenos"> 81</span> <span class="nb">print</span><span class="p">(</span><span class="n">x_center</span><span class="p">)</span>
<span class="linenos"> 82</span> <span class="nb">print</span><span class="p">(</span><span class="n">y_center</span><span class="p">)</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span> <span class="c1"># Convert the computed matrix to an stacked dataframe?</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span> <span class="n">flip1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 87</span> <span class="n">flip2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">r2</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 88</span> <span class="c1">#flip1 = r1.statistic</span>
<span class="linenos"> 89</span> <span class="c1">#flip2 = r2.statistic</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span>
<span class="linenos"> 92</span>
<span class="linenos"> 93</span> <span class="c1"># Display</span>
<span class="linenos"> 94</span> <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 95</span>     <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">flip1</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="linenos"> 98</span>     <span class="n">xticklabels</span><span class="o">=</span><span class="n">y_center</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span>
<span class="linenos"> 99</span>     <span class="n">yticklabels</span><span class="o">=</span><span class="n">x_center</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="c1"># Because of flip</span>
<span class="linenos">100</span>     <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos">101</span>     <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">())</span>
<span class="linenos">102</span>
<span class="linenos">103</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">flip2</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="linenos">104</span>     <span class="n">xticklabels</span><span class="o">=</span><span class="n">y_center</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span>
<span class="linenos">105</span>     <span class="n">yticklabels</span><span class="o">=</span><span class="n">x_center</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="c1"># Because of flip</span>
<span class="linenos">106</span>     <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">107</span>     <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">108</span>
<span class="linenos">109</span> <span class="c1"># If robust=True and vmin or vmax are absent, the colormap range</span>
<span class="linenos">110</span> <span class="c1"># is computed with robust quantiles instead of the extreme values.</span>
<span class="linenos">111</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">112</span><span class="sd"> sns.violinplot(x=x, y=y,</span>
<span class="linenos">113</span><span class="sd">     saturation=0.5, fliersize=0.1, linewidth=0.5,</span>
<span class="linenos">114</span><span class="sd">     color=&#39;green&#39;, ax=axs[2], zorder=3,</span>
<span class="linenos">115</span><span class="sd">     width=0.5)</span>
<span class="linenos">116</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="linenos">117</span>
<span class="linenos">118</span>
<span class="linenos">119</span> <span class="c1"># Configure ax0</span>
<span class="linenos">120</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="linenos">121</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">)</span>
<span class="linenos">122</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;shap&#39;</span><span class="p">)</span>
<span class="linenos">123</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">locator_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">nbins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">124</span> <span class="c1">#axs[0].set_aspect(&#39;equal&#39;, &#39;box&#39;</span>
<span class="linenos">125</span>
<span class="linenos">126</span> <span class="c1"># Configure ax1</span>
<span class="linenos">127</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;median&#39;</span><span class="p">)</span>
<span class="linenos">128</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">)</span>
<span class="linenos">129</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;shap&#39;</span><span class="p">)</span>
<span class="linenos">130</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">locator_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">nbins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">131</span> <span class="c1">#axs[1].set_aspect(&#39;equal&#39;, &#39;box&#39;)</span>
<span class="linenos">132</span> <span class="c1">#axs[1].invert_yaxis()</span>
<span class="linenos">133</span>
<span class="linenos">134</span> <span class="c1"># Generic</span>
<span class="linenos">135</span> <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;C-Reactive Protein&#39;</span><span class="p">)</span>
<span class="linenos">136</span>
<span class="linenos">137</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">138</span><span class="sd"> # Set axes manually</span>
<span class="linenos">139</span><span class="sd"> #plt.set_xticks()</span>
<span class="linenos">140</span><span class="sd"> #plt.setp(axs[1].get_yticklabels()[::1], visible=False)</span>
<span class="linenos">141</span><span class="sd"> #plt.setp(axs[1].get_yticklabels()[::5], visible=True)</span>
<span class="linenos">142</span><span class="sd"> from matplotlib import ticker</span>
<span class="linenos">143</span><span class="sd"> axs[1].xaxis.set_major_locator(ticker.MultipleLocator(1.00))</span>
<span class="linenos">144</span><span class="sd"> axs[1].xaxis.set_minor_locator(ticker.MultipleLocator(0.25))</span>
<span class="linenos">145</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="linenos">146</span>
<span class="linenos">147</span> <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="linenos">148</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos">149</span>
<span class="linenos">150</span>
<span class="linenos">151</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">152</span><span class="sd"> import sys</span>
<span class="linenos">153</span><span class="sd"> sys.exit()</span>
<span class="linenos">154</span><span class="sd"> # Compute bin statistic (count and median)</span>
<span class="linenos">155</span>
<span class="linenos">156</span><span class="sd"> # Plot</span>
<span class="linenos">157</span><span class="sd"> plt.figure()</span>
<span class="linenos">158</span><span class="sd"> sns.violinplot(data=data, x=&quot;timestep&quot;, y=&quot;shap_values&quot;, inner=&quot;box&quot;)</span>
<span class="linenos">159</span><span class="sd"> plt.figure()</span>
<span class="linenos">160</span><span class="sd"> plt.tight_layout()</span>
<span class="linenos">161</span><span class="sd"> sns.violinplot(data=data, x=&quot;timestep&quot;, y=&quot;feature_values&quot;, inner=&quot;box&quot;)</span>
<span class="linenos">162</span><span class="sd"> plt.figure()</span>
<span class="linenos">163</span><span class="sd"> sns.histplot(data=data, x=&quot;timestep&quot;, shrink=.8)</span>
<span class="linenos">164</span>
<span class="linenos">165</span>
<span class="linenos">166</span><span class="sd"> # Plot hist</span>
<span class="linenos">167</span><span class="sd"> f1 = plt.hist2d(data.timestep, data.feature_values, bins=30, cmap=&#39;Reds&#39;)</span>
<span class="linenos">168</span><span class="sd"> cb = plt.colorbar()</span>
<span class="linenos">169</span><span class="sd"> cb.set_label(&#39;counts in bin&#39;)</span>
<span class="linenos">170</span><span class="sd"> plt.title(&#39;Counts (square bin)&#39;)</span>
<span class="linenos">171</span><span class="sd"> plt.show()</span>
<span class="linenos">172</span><span class="sd"> &quot;&quot;&quot;</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.011 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-matplotlib-plot-main07-2dbin-manual-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/f0196bd79bd0957d752fa7636bd3c303/plot_main07_2dbin_manual.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_main07_2dbin_manual.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/696d685d22bd4981cc43d643ca50139b/plot_main07_2dbin_manual.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_main07_2dbin_manual.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plot_main07_2dbin_heatmap.html" class="btn btn-neutral float-left" title="Main 07 - 2dbin and sns.heatmap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plot_main07_2dbin_shap.html" class="btn btn-neutral float-right" title="Main 07 - 2dbin with shap.csv" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, Bernard Hernandez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>